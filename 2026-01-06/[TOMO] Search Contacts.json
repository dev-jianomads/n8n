{"updatedAt":"2026-01-05T17:49:53.395Z","createdAt":"2026-01-05T17:49:53.395Z","id":"MJ6F3OaQEYFBQge4bnohT","name":"[TOMO] Search Contacts","active":true,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"query"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-736,304],"id":"c3d0d315-01e3-48b7-975b-6eef7c1cb9b6","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{"waitForSubWorkflow":false}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-512,304],"id":"162013dc-617e-41fb-ab12-581db8ad9c83","name":"Get Token","onError":"continueRegularOutput"},{"parameters":{"url":"=https://people.googleapis.com/v1/people:searchContacts","sendQuery":true,"queryParameters":{"parameters":[{"name":"query","value":"={{ $('When Executed by Another Workflow').item.json.query }}"},{"name":"readMask","value":"names,emailAddresses"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-288,304],"id":"7036441c-c812-40f0-b064-b6958bf6fdf3","name":"Search Contacts","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"jsonSchemaExample":"{\n  \"results\": [\n    {\"fullName\": \"Ken Wong\",\n      \"email\": \"ken@jia-nomads.com\",\n      \"number\": 1\n    },\n    {\n      \"fullName\": \"Ken Dad HK\",\n      \"email\": null,\n      \"number\": 2\n    }\n  ]\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[128,112],"id":"7ca0def0-4c7e-456e-89d9-84ded48e1199","name":"Structured Output Parser"},{"parameters":{"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-48,112],"id":"f16ee630-8ad4-4c4c-a3d2-4252e73781db","name":"4.1 Mini","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[128,320],"id":"6ad23924-0bd7-409d-9f29-e4253ede06b5","name":"4.1_mini","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAI account"}}},{"parameters":{"promptType":"define","text":"=Take the results from Google Contact's API, and create a simplified JSON list with:\n- Contact Full Name.\n- Contact Email.\n- Number (the number of the contact in the list of results)\n\n## Input:\n{{ JSON.stringify($json.results) }}","hasOutputParser":true,"needsFallback":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-64,-112],"id":"008845ed-f471-4430-a150-9138819a23e9","name":"Output Formatter"},{"parameters":{"assignments":{"assignments":[{"id":"7ac574f1-cccb-426d-b676-5b9446410a0d","name":"response","value":"=There was an error: {{ JSON.stringify($json) }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[112,496],"id":"6a8eecb7-564f-40d5-9f71-8f3f854b1074","name":"Error Response"},{"parameters":{"assignments":{"assignments":[{"id":"15d523a5-eab8-482c-9342-58e06eb3af35","name":"response","value":"={{$json.output.results.map(r => r.number + \". Full Name: \" + r.fullName + \"\\n  Email: \" + r.email).join(\"\\n\\n\")}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[496,96],"id":"8d42d973-afa5-406d-a3b6-961e5ea0de83","name":"Successful Response"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"Search Contacts","type":"main","index":0}]]},"Search Contacts":{"main":[[{"node":"Output Formatter","type":"main","index":0}],[{"node":"Error Response","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Output Formatter","type":"ai_outputParser","index":0}]]},"4.1 Mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":0}]]},"4.1_mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":1},{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"Output Formatter":{"main":[[{"node":"Successful Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","availableInMCP":false},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"userId":"0HpJe5sETk3z9thjekbyzmfSX5Fo","query":"ken"}}],"Search Contacts":[{"json":{"results":[{"person":{"resourceName":"people/c1467631864186137506","etag":"%EgcBAgkuNz0+GgECIgwvTk8zc0NsQm1XST0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"145e136795dbeba2"},"sourcePrimary":true},"displayName":"Ken Dad HK","givenName":"Ken Dad HK","displayNameLastFirst":"Ken Dad HK","unstructuredName":"Ken Dad HK"}]}},{"person":{"resourceName":"people/c5312739810180299075","etag":"%EgcBAgkuNz0+GgECIgxFYkdQaTA1ZlFqQT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"49baa4b591df7943"},"sourcePrimary":true},"displayName":"Ken Wong","familyName":"Wong","givenName":"Ken","displayNameLastFirst":"Wong, Ken","unstructuredName":"Ken Wong"}]}},{"person":{"resourceName":"people/c5370861444361165055","etag":"%EgcBAgkuNz0+GgECIgxhbE9zUCtRRG1BQT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"4a89220710fd18ff"},"sourcePrimary":true},"displayName":"Ken_冷氣清洗","givenName":"Ken_冷氣清洗","displayNameLastFirst":"Ken_冷氣清洗","unstructuredName":"Ken_冷氣清洗"}]}},{"person":{"resourceName":"people/c7078635452459776502","etag":"%EgcBAgkuNz0+GgECIgxDM2E0SU1YTHZ4bz0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"623c5d709659f9f6"},"sourcePrimary":true},"displayName":"Kennies-shop","givenName":"Kennies-shop","displayNameLastFirst":"Kennies-shop","unstructuredName":"Kennies-shop"}]}},{"person":{"resourceName":"people/c641478538677446606","etag":"%EgcBAgkuNz0+GgECIgwvUkN4OGVqTitWUT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"8e6fd550ce7e7ce"},"sourcePrimary":true},"displayName":"Carmen Ken","familyName":"Ken","givenName":"Carmen","displayNameLastFirst":"Ken, Carmen","unstructuredName":"Carmen Ken"}]}}]}}]},"versionId":"e2237504-ccc6-4ea0-be26-1075fdcd0d4e","activeVersionId":"e2237504-ccc6-4ea0-be26-1075fdcd0d4e","triggerCount":0,"shared":[{"updatedAt":"2026-01-05T17:49:53.395Z","createdAt":"2026-01-05T17:49:53.395Z","role":"workflow:owner","workflowId":"MJ6F3OaQEYFBQge4bnohT","projectId":"8nyfoRCh3nEYWaKJ"}],"activeVersion":{"updatedAt":"2026-01-05T18:03:15.964Z","createdAt":"2026-01-05T17:49:53.395Z","versionId":"e2237504-ccc6-4ea0-be26-1075fdcd0d4e","workflowId":"MJ6F3OaQEYFBQge4bnohT","nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"query"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-736,304],"id":"c3d0d315-01e3-48b7-975b-6eef7c1cb9b6","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{"waitForSubWorkflow":false}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-512,304],"id":"162013dc-617e-41fb-ab12-581db8ad9c83","name":"Get Token","onError":"continueRegularOutput"},{"parameters":{"url":"=https://people.googleapis.com/v1/people:searchContacts","sendQuery":true,"queryParameters":{"parameters":[{"name":"query","value":"={{ $('When Executed by Another Workflow').item.json.query }}"},{"name":"readMask","value":"names,emailAddresses"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-288,304],"id":"7036441c-c812-40f0-b064-b6958bf6fdf3","name":"Search Contacts","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"jsonSchemaExample":"{\n  \"results\": [\n    {\"fullName\": \"Ken Wong\",\n      \"email\": \"ken@jia-nomads.com\",\n      \"number\": 1\n    },\n    {\n      \"fullName\": \"Ken Dad HK\",\n      \"email\": null,\n      \"number\": 2\n    }\n  ]\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[128,112],"id":"7ca0def0-4c7e-456e-89d9-84ded48e1199","name":"Structured Output Parser"},{"parameters":{"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-48,112],"id":"f16ee630-8ad4-4c4c-a3d2-4252e73781db","name":"4.1 Mini","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[128,320],"id":"6ad23924-0bd7-409d-9f29-e4253ede06b5","name":"4.1_mini","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAI account"}}},{"parameters":{"promptType":"define","text":"=Take the results from Google Contact's API, and create a simplified JSON list with:\n- Contact Full Name.\n- Contact Email.\n- Number (the number of the contact in the list of results)\n\n## Input:\n{{ JSON.stringify($json.results) }}","hasOutputParser":true,"needsFallback":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-64,-112],"id":"008845ed-f471-4430-a150-9138819a23e9","name":"Output Formatter"},{"parameters":{"assignments":{"assignments":[{"id":"7ac574f1-cccb-426d-b676-5b9446410a0d","name":"response","value":"=There was an error: {{ JSON.stringify($json) }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[112,496],"id":"6a8eecb7-564f-40d5-9f71-8f3f854b1074","name":"Error Response"},{"parameters":{"assignments":{"assignments":[{"id":"15d523a5-eab8-482c-9342-58e06eb3af35","name":"response","value":"={{$json.output.results.map(r => r.number + \". Full Name: \" + r.fullName + \"\\n  Email: \" + r.email).join(\"\\n\\n\")}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[496,96],"id":"8d42d973-afa5-406d-a3b6-961e5ea0de83","name":"Successful Response"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"Search Contacts","type":"main","index":0}]]},"Search Contacts":{"main":[[{"node":"Output Formatter","type":"main","index":0}],[{"node":"Error Response","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Output Formatter","type":"ai_outputParser","index":0}]]},"4.1 Mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":0}]]},"4.1_mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":1},{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"Output Formatter":{"main":[[{"node":"Successful Response","type":"main","index":0}]]}},"authors":"Dev JIA","name":"Version e2237504","description":"","autosaved":false},"tags":[]}