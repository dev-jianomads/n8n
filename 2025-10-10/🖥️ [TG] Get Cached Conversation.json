{"createdAt":"2025-08-28T21:46:21.834Z","updatedAt":"2025-09-17T18:29:03.999Z","id":"IOSFHvzzfnVGmNZr","name":"üñ•Ô∏è [TG] Get Cached Conversation","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"telegramId"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-128,-112],"id":"3b7e1aaf-5030-4586-a6ae-948515ba5421","name":"When Executed by Another Workflow"},{"parameters":{"operation":"get","propertyName":"chat_history","key":"={{ $json.telegramId }}_DEV","options":{"dotNotation":true}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[96,-112],"id":"3ba9954c-6b68-4cd1-87fc-8851b8d0148f","name":"Get Cached Chat History","credentials":{"redis":{"id":"UKWNNzdg9opjGBYW","name":"Redis Cache"}}},{"parameters":{"assignments":{"assignments":[{"id":"08808018-7fe8-4f13-87c2-0ca1cf0ca211","name":"chat_history","value":"={{ JSON.parse($json.chat_history) }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[320,-112],"id":"0f94f929-1a54-478c-ba9c-623104c178eb","name":"Parse Chat History"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"3f30d3a0-7e86-41ad-885a-f6a43f9665a1","leftValue":"={{ $json.chat_history }}","rightValue":"","operator":{"type":"array","operation":"notExists","singleValue":true}},{"id":"db212835-39e0-47fd-8ad7-a0151a408f87","leftValue":"={{ $json.chat_history }}","rightValue":"","operator":{"type":"array","operation":"empty","singleValue":true}}],"combinator":"or"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[544,-112],"id":"9c8aafe6-924c-4fac-af90-1ddde96b8a76","name":"Does Not Exist?"},{"parameters":{"workflowId":{"__rl":true,"value":"eHXJ67uWUIoAqTmg","mode":"list","cachedResultName":"üñ•Ô∏è [TG] Get Conversation"},"workflowInputs":{"mappingMode":"defineBelow","value":{"telegramId":"={{ $('When Executed by Another Workflow').item.json.telegramId }}"},"matchingColumns":["telegramId"],"schema":[{"id":"telegramId","displayName":"telegramId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[800,-208],"id":"c391044b-8010-4b21-b461-e985ba48243c","name":"Compute Chat History"},{"parameters":{"assignments":{"assignments":[{"id":"a0ef7e2a-7bf3-4806-8646-a147178007a5","name":"chat_history","value":"={{ $json.chat_history }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[992,-80],"id":"e7535868-0190-4509-acbf-b907d48f682a","name":"Unify Chat History"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Get Cached Chat History","type":"main","index":0}]]},"Get Cached Chat History":{"main":[[{"node":"Parse Chat History","type":"main","index":0}]]},"Parse Chat History":{"main":[[{"node":"Does Not Exist?","type":"main","index":0}]]},"Does Not Exist?":{"main":[[{"node":"Compute Chat History","type":"main","index":0}],[{"node":"Unify Chat History","type":"main","index":0}]]},"Compute Chat History":{"main":[[{"node":"Unify Chat History","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"telegramId":"8325351367"}}]},"versionId":"9cff7438-7d1e-4e59-a07a-ad1e90bb6009","triggerCount":0,"shared":[{"createdAt":"2025-08-28T21:46:21.834Z","updatedAt":"2025-08-28T21:46:21.834Z","role":"workflow:owner","workflowId":"IOSFHvzzfnVGmNZr","projectId":"8nyfoRCh3nEYWaKJ"}],"tags":[]}