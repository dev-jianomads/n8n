{"createdAt":"2025-09-23T17:31:15.534Z","updatedAt":"2025-09-23T17:51:10.854Z","id":"mh2OooSJDNqUVlIk","name":"üñ•Ô∏è [TG] Get Weather Report","active":false,"isArchived":false,"nodes":[{"parameters":{"model":"openai/gpt-4.1","options":{"temperature":0.3}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-1992,160],"id":"63a4b26e-7b87-4287-a8ba-d6505d626e74","name":"GPT 4.1","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"text":"={{ $json.scheduler_response }}","attributes":{"attributes":[{"name":"location","description":"The plausible location of the user based on their events of the day. If no location can be inferred, this value should be NONE.\n\nIMPORTANT: Time zones alone are not a trustworthy indicative of location. E.g., a time zone of America/Bogota does NOT necessarily mean the user is located in Bogot√°, Colombia.\n\nYou should focus only on events with explicit locations and infer from those.","required":true}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.informationExtractor","typeVersion":1.2,"position":[-2064,-64],"id":"f85ce111-d2b8-45c9-8439-cdbcfcd7797a","name":"Extract Location"},{"parameters":{"conditions":{"options":{"caseSensitive":false,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"4ef51d5b-541b-4466-a5bd-24a7a7b2b698","leftValue":"={{ $json.output.location }}","rightValue":"NONE","operator":{"type":"string","operation":"notEquals"}}],"combinator":"and"},"options":{"ignoreCase":true}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-1712,-64],"id":"b67e2dad-92f6-4c37-922f-95128a074ec8","name":"Location?"},{"parameters":{"workflowInputs":{"values":[{"name":"scheduler_response"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-2288,-64],"id":"e632d803-14ac-4ab0-8798-d7e13df4a0f2","name":"When Executed by Another Workflow"},{"parameters":{"method":"POST","url":"https://api.tavily.com/search","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendBody":true,"bodyParameters":{"parameters":[{"name":"query","value":"=What's today's weather in {{ $json.output.location }}?"},{"name":"include_answer","value":"advanced"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1488,-160],"id":"c9206eb1-4fba-4712-a298-85b562629f2c","name":"Query Weather Info","credentials":{"tavilyApi":{"id":"pQpYp2R81K4M8MWk","name":"Tavily account"},"httpBearerAuth":{"id":"Bzjhn3x2pdZKI9kQ","name":"Tavily Bearer Auth"}}},{"parameters":{"model":"anthropic/claude-3.7-sonnet","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-1192,64],"id":"8f18da27-c84c-43cb-8c6d-4d6ace9f2c87","name":"Claude 3.7","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"promptType":"define","text":"=Write a playful message regarding today's weather. Give recommendations such as what to wear and what precautions to take, if applicable. Use emojis sparingly.\n\nKeep it 3 sentences, max. No need to start with a salutation.\n\nWrite in the second person, as if you were the personal assistant of the recipient.\n\nOnly return the message.\n\nWeather info from the bet:\n{{ JSON.stringify($json.answer) }}","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-1264,-160],"id":"5ccc19d4-1997-46b0-bf58-dc3c94ba2d1d","name":"Weather Report Writer"},{"parameters":{"assignments":{"assignments":[{"id":"28bbae8e-745a-4cda-b4a5-a0c99f0260b4","name":"response","value":"NONE","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1488,32],"id":"eb1a1fa4-41b6-493e-a5ef-aa1523d4a5c6","name":"Set 'NONE' Response"},{"parameters":{"assignments":{"assignments":[{"id":"28bbae8e-745a-4cda-b4a5-a0c99f0260b4","name":"response","value":"={{ $json.output }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-912,-160],"id":"752f2439-e6c8-40d9-9eef-b302669b5b8d","name":"Set Weather Response"}],"connections":{"GPT 4.1":{"ai_languageModel":[[{"node":"Extract Location","type":"ai_languageModel","index":0}]]},"Extract Location":{"main":[[{"node":"Location?","type":"main","index":0}]]},"Location?":{"main":[[{"node":"Query Weather Info","type":"main","index":0}],[{"node":"Set 'NONE' Response","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Extract Location","type":"main","index":0}]]},"Query Weather Info":{"main":[[{"node":"Weather Report Writer","type":"main","index":0}]]},"Claude 3.7":{"ai_languageModel":[[{"node":"Weather Report Writer","type":"ai_languageModel","index":0}]]},"Weather Report Writer":{"main":[[{"node":"Set Weather Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"scheduler_response":"Here‚Äôs your schedule for today (September 22nd, 2025):\n‚Ä¢ Contract Discussion ‚Äì 6:00 PM to 7:00 PM (America/Bogota) at Osaki Calle 90, Cra. 11a #89-14, Bogot√°, Colombia.\n‚Ä¢ Gym ‚Äì 7:15 PM to 8:00 PM (America/Bogota)\nLet me know if you need more details or want to make any changes! üóìÔ∏è"}}]},"versionId":"87397cf1-4fbd-4d1e-8f19-f14f43bb22cf","triggerCount":0,"shared":[{"createdAt":"2025-09-23T17:31:15.534Z","updatedAt":"2025-09-23T17:31:15.534Z","role":"workflow:owner","workflowId":"mh2OooSJDNqUVlIk","projectId":"8nyfoRCh3nEYWaKJ"}],"tags":[]}