{"createdAt":"2025-07-30T17:52:03.058Z","updatedAt":"2025-08-27T21:43:31.827Z","id":"B4R5PCXZUaCSSdbV","name":"[TG] Send Telegram Message","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"telegramId"},{"name":"message"},{"name":"chatId"},{"name":"toolActivity","type":"array"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1456,32],"id":"78ddec19-6321-41da-892c-207c5136a706","name":"When Executed by Another Workflow"},{"parameters":{"assignments":{"assignments":[{"id":"994defb3-f232-4a03-a0c8-248ff454b522","name":"timetampUTC","value":"={{ $json.result.date.toDateTime('s').toUTC().toISO() }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-992,32],"id":"c1c5ab8c-07e9-4f9d-aa62-6d9193a892a2","name":"Parse Timestamp"},{"parameters":{"tableId":"telegram_messages","fieldsUi":{"fieldValues":[{"fieldId":"telegram_date","fieldValue":"={{ $('Send AI Reply').item.json.result.date }}"},{"fieldId":"telegram_date_utc","fieldValue":"={{ $json.timetampUTC }}"},{"fieldId":"text","fieldValue":"={{ $('When Executed by Another Workflow').first().json.message }}"},{"fieldId":"direction","fieldValue":"outbound"},{"fieldId":"sender_id","fieldValue":"={{ $('Send AI Reply').item.json.result.from.id }}"},{"fieldId":"recipient_id","fieldValue":"={{ $('When Executed by Another Workflow').item.json.telegramId }}"},{"fieldId":"tool_activity","fieldValue":"={{ $('When Executed by Another Workflow').item.json.toolActivity }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-768,32],"id":"0f780c95-6a09-44e7-a885-b132ea89be46","name":"Save Message","credentials":{"supabaseApi":{"id":"PwJN4yKDRZqivq2f","name":"Supabase account"}}},{"parameters":{"chatId":"={{ $json.chatId }}","text":"={{ $json.message }}","additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-1216,32],"id":"eb1517e4-6e78-4ad2-b5f9-8675de2622df","name":"Send AI Reply","webhookId":"4e2ea654-f456-4ef4-8523-ded918a8be61","credentials":{"telegramApi":{"id":"ZhOp4IaJqCFjHFqK","name":"Ask Tomo (PROD)"}}}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Send AI Reply","type":"main","index":0}]]},"Parse Timestamp":{"main":[[{"node":"Save Message","type":"main","index":0}]]},"Send AI Reply":{"main":[[{"node":"Parse Timestamp","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"63JMaA3ATIsJVc6Y"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"telegramId":"1285717306","message":"You are in the America/Los_Angeles time zone.","chatId":"1285717306"}}]},"versionId":"a17fa072-b5b8-4a9a-a350-538ec75ffc05","triggerCount":0,"shared":[{"createdAt":"2025-07-30T17:52:03.058Z","updatedAt":"2025-07-30T17:52:03.058Z","role":"workflow:owner","workflowId":"B4R5PCXZUaCSSdbV","projectId":"8nyfoRCh3nEYWaKJ"}],"tags":[]}