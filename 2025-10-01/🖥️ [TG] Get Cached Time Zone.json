{"createdAt":"2025-08-28T21:47:44.283Z","updatedAt":"2025-09-30T19:57:15.630Z","id":"9jeZuQfIDYEe9f5u","name":"üñ•Ô∏è [TG] Get Cached Time Zone","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"telegramId"},{"name":"userId"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-288,-144],"id":"37a82f6d-9b3e-4d5e-a9e4-7f81d78047d4","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"DHcoEXUvqWWKxbZD","mode":"list","cachedResultUrl":"/workflow/DHcoEXUvqWWKxbZD","cachedResultName":"üñ•Ô∏è [TG] Get Time Zone"},"workflowInputs":{"mappingMode":"defineBelow","value":{"userId":"={{ $('When Executed by Another Workflow').first().json.userId }}","context":"={{ $json.context }}"},"matchingColumns":[],"schema":[{"id":"userId","displayName":"userId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"},{"id":"context","displayName":"context","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[160,-144],"id":"d2bfb287-b0a5-4c71-afba-27bb71403fba","name":"Compute Time Zone"},{"parameters":{"assignments":{"assignments":[{"id":"29ad7c76-3dcb-4e2b-9f4f-3d52f99bb65b","name":"timeZone","value":"={{ $json.time_zone }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[608,-144],"id":"101277fc-c017-4450-ba68-10259f86afc9","name":"Unify Time Zone"},{"parameters":{"workflowId":{"__rl":true,"value":"txYpaNwSbz1bwZ4u","mode":"list","cachedResultUrl":"/workflow/txYpaNwSbz1bwZ4u","cachedResultName":"üñ•Ô∏è [TG] Get Zep Context"},"workflowInputs":{"mappingMode":"defineBelow","value":{"sender_id":"={{ $json.telegramId }}"},"matchingColumns":["sender_id"],"schema":[{"id":"sender_id","displayName":"sender_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[-64,-144],"id":"6a1fc0f0-809e-44a9-ba64-326face6a60c","name":"Call 'üñ•Ô∏è [TG] Get Zep Context'"},{"parameters":{"operation":"get","dataTableId":{"__rl":true,"value":"qeLIz9DKeWvrpPeL","mode":"list","cachedResultName":"user_timezones","cachedResultUrl":"/projects/8nyfoRCh3nEYWaKJ/datatables/qeLIz9DKeWvrpPeL"},"filters":{"conditions":[{"keyName":"telegram_id","keyValue":"={{ $json.telegramId }}"},{"keyName":"updatedAt","keyValue":"={{ $now.minus(6, 'hour') }}"},{"keyName":"environment","keyValue":"dev"}]}},"type":"n8n-nodes-base.dataTable","typeVersion":1,"position":[-288,-368],"id":"fa7443a4-4c59-4b25-9a28-0d97cec90978","name":"Get row(s)","alwaysOutputData":true},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json }}","rightValue":"","operator":{"type":"object","operation":"notEmpty","singleValue":true},"id":"4aaa41a9-19f7-4ac2-991f-ce0ea4733662"}],"combinator":"and"},"renameOutput":true,"outputKey":"EXISTS"}]},"options":{"fallbackOutput":"extra"}},"type":"n8n-nodes-base.switch","typeVersion":3.3,"position":[-64,-368],"id":"a8d5b77f-98ea-4cfd-8a32-73e61382e599","name":"Switch"},{"parameters":{"operation":"upsert","dataTableId":{"__rl":true,"value":"qeLIz9DKeWvrpPeL","mode":"list","cachedResultName":"user_timezones","cachedResultUrl":"/projects/8nyfoRCh3nEYWaKJ/datatables/qeLIz9DKeWvrpPeL"},"filters":{"conditions":[{"keyName":"environment","keyValue":"dev"},{"keyName":"telegram_id","keyValue":"={{ $('When Executed by Another Workflow').first().json.telegramId }}"}]},"columns":{"mappingMode":"defineBelow","value":{"time_zone":"={{ $json.timeZone }}","telegram_id":"={{ $('When Executed by Another Workflow').first().json.telegramId }}","environment":"dev"},"matchingColumns":[],"schema":[{"id":"environment","displayName":"environment","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"telegram_id","displayName":"telegram_id","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"time_zone","displayName":"time_zone","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"n8n-nodes-base.dataTable","typeVersion":1,"position":[384,-144],"id":"5d893fdf-2689-4e9a-a4a5-d94c52e14f1f","name":"Upsert row(s)"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Call 'üñ•Ô∏è [TG] Get Zep Context'","type":"main","index":0}]]},"Compute Time Zone":{"main":[[{"node":"Upsert row(s)","type":"main","index":0}]]},"Unify Time Zone":{"main":[[]]},"Call 'üñ•Ô∏è [TG] Get Zep Context'":{"main":[[{"node":"Compute Time Zone","type":"main","index":0}]]},"Get row(s)":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Switch":{"main":[[],[]]},"Upsert row(s)":{"main":[[{"node":"Unify Time Zone","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"telegramId":"1598386790","userId":"d24503d6-48da-4af1-8599-177cd8501341"}}],"Call 'üñ•Ô∏è [TG] Get Zep Context'":[{"json":{"context":"‚Ä¢ User requested an instant meeting on 2025-09-30 at 18:46:31 (2025-09-30 18:46:31 - present)\n‚Ä¢ Assistant created Google Meet link https://meet.google.com/pet-rnrx-tam for instant meeting (2025-09-30 18:46:48 - present)\n‚Ä¢ Instant meeting was marked as starting immediately upon creation (2025-09-30 18:46:48 - present)\n‚Ä¢ User cancelled a previously scheduled meeting with Jon scheduled for September 29th, 2025 (2025-09-29 23:32:52 - 2025-09-30 18:46:31)\n‚Ä¢ Previous meeting with Jon@test.xyz was booked for September 29th, 2025 at 6:32 PM‚Äì7:02 PM (America/Bogota) (2025-09-29 23:32:52 - 2025-09-30 18:46:31)"}}]},"versionId":"5cd2666e-2d20-4bc4-84b2-84279b2ed924","triggerCount":0,"shared":[{"createdAt":"2025-08-28T21:47:44.283Z","updatedAt":"2025-08-28T21:47:44.283Z","role":"workflow:owner","workflowId":"9jeZuQfIDYEe9f5u","projectId":"8nyfoRCh3nEYWaKJ"}],"tags":[]}