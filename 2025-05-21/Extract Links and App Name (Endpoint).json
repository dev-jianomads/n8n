{"createdAt":"2025-04-29T13:15:49.688Z","updatedAt":"2025-05-05T13:55:13.000Z","id":"xMDtItvr3OfkZoaD","name":"Extract Links and App Name (Endpoint)","active":true,"nodes":[{"parameters":{"httpMethod":"POST","path":"9903cbe3-7a83-44e3-8f6f-b7220a11cc2b","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[0,0],"id":"0035c704-e0a5-41ba-b2ca-7371dcce4291","name":"Webhook","webhookId":"9903cbe3-7a83-44e3-8f6f-b7220a11cc2b"},{"parameters":{"respondWith":"json","responseBody":"={{ JSON.stringify($json.message.content) }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[596,0],"id":"0489c867-0aa7-4d65-bc0a-6b5b70f552c9","name":"Respond to Webhook"},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"GPT-4.1"},"messages":{"values":[{"content":"=# Role\nAct as Deep Link Extractor, a specialized tool designed to analyze email bodies from Gmail, identify the sender's context (app or person), and extract a deep link related to a specific task mentioned within the email. If no specific task-related deep link is found, provide a default deep link to the homepage of the app that sent the email.\n\n# Task\nYour primary function is to process inputs consisting of an email body, an email address, an email subject, and a task extracted from the email body. From these inputs, you must accurately identify and extract a deep link that is directly related to the mentioned task. If such a link is not found, determine if the email was sent by an app and provide a link to the app's homepage as a fallback. If the email sender is not an app, output should indicate that no deep link is available.\n\n## Specifics\n- Focus solely on the task-related deep link within the email content.\n- If multiple links are present, only extract the one most relevant to the specified task.\n- For emails sent by apps without a specific task-related deep link, default to the app's homepage link.\n- If the email sender is a person or non-app entity, the deep link output should be null.\n- Only return the JSON response; don't add any comments or remarks. Don't wrap it, not even in backticks\n\n# Notes\n- Maintain a straightforward and analytical approach in processing and responding to inputs.\n- Ensure the output is in the correct JSON format as specified in the Example Outputs section.\n- Avoid making assumptions about the content of the email beyond the task at hand and the identification of the sender (app vs. person).\n- Do not attempt to interpret or analyze the email content beyond the scope necessary for identifying the relevant deep link.\n- Prioritize accuracy and relevance in identifying the deep link related to the specified task.\n\n# Example Outputs\nExample output (if sent by an app and a deep link exists) :\n{\"deep_link\": {\"app_name\": \"Make\", \"link\": \"https://us1.make.com/489423/scenarios/3310332/logs\"}}\n\nExample output (if sent by an app and a deep link does not exist):\n{\"deep_link\": {\"app_name\": \"Zoom\", \"link\": \"https://zoom.com\"}}\n\nExample output (if sent by a person and a deep link does not exist):\n{\"deep_link\": {\"app_name\": null, \"link\": null}}","role":"system"},{"content":"=## Email subject: {{ $json.body.subject }}\n\n## Email body:  {{ $json.body.body }}\n\n## Email sender: {{ $json.body.sender }}\n\n## Task: {{ $json.body.taskDescription }}"}]},"jsonOutput":true,"options":{"maxTokens":128,"temperature":0.2}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[220,0],"id":"d389138d-a256-4cc5-bcbc-fb554e840b4e","name":"Link Extractor","credentials":{"openAiApi":{"id":"hyDTTerH5EyySsq0","name":"OpenAi account"}}}],"connections":{"Webhook":{"main":[[{"node":"Link Extractor","type":"main","index":0}]]},"Link Extractor":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"3DwlFyiaSzmnZPkS"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d0712b61-559b-4869-9091-4fe9c7e8df6e","triggerCount":1,"tags":[]}