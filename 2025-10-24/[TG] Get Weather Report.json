{"createdAt":"2025-09-24T20:49:38.344Z","updatedAt":"2025-10-23T17:15:19.947Z","id":"1Bf1FtaUC4GEY3hs","name":"[TG] Get Weather Report","active":false,"isArchived":false,"nodes":[{"parameters":{"model":"openai/gpt-4.1","options":{"temperature":0.3}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[32,528],"id":"f67bf66b-0e8a-4d3b-b4cf-aab07ba653c0","name":"GPT 4.1","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"text":"={{ $json.scheduler_response }}","attributes":{"attributes":[{"name":"location","description":"The plausible location of the user based on their events of the day. If no location can be inferred, this value should be NONE.\n\nIMPORTANT: Time zones alone are not a trustworthy indicative of location. E.g., a time zone of America/Bogota does NOT necessarily mean the user is located in Bogot√°, Colombia.\n\nYou should focus only on events with explicit locations and infer from those.","required":true}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.informationExtractor","typeVersion":1.2,"position":[-32,304],"id":"5ca2c864-58ce-4e6a-bcd3-3047264f0810","name":"Extract Location","retryOnFail":true},{"parameters":{"conditions":{"options":{"caseSensitive":false,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"4ef51d5b-541b-4466-a5bd-24a7a7b2b698","leftValue":"={{ $json.output.location }}","rightValue":"NONE","operator":{"type":"string","operation":"notEquals"}}],"combinator":"and"},"options":{"ignoreCase":true}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[320,304],"id":"14de83ef-6f5e-4981-9cea-434c8813a275","name":"Location?"},{"parameters":{"workflowInputs":{"values":[{"name":"scheduler_response"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-256,304],"id":"7fd938fb-7737-467f-aac0-ea2d343f04ed","name":"When Executed by Another Workflow"},{"parameters":{"method":"POST","url":"https://api.tavily.com/search","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendBody":true,"bodyParameters":{"parameters":[{"name":"query","value":"=What's today's weather in {{ $json.output.location }}?"},{"name":"include_answer","value":"advanced"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[544,208],"id":"5f734c10-f5bf-4629-8fcf-0f03318fe6ac","name":"Query Weather Info","retryOnFail":true,"credentials":{"tavilyApi":{"id":"pQpYp2R81K4M8MWk","name":"Tavily account"},"httpBearerAuth":{"id":"Bzjhn3x2pdZKI9kQ","name":"Tavily Bearer Auth"}}},{"parameters":{"model":"anthropic/claude-3.7-sonnet","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[720,464],"id":"0c8e514b-c7dc-4841-9e1b-e9a8af229482","name":"Claude 3.7","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"promptType":"define","text":"=Write a playful message regarding today's weather. Give recommendations such as what to wear and what precautions to take, if applicable. Use emojis sparingly.\n\nKeep it 3 sentences, max. No need to start with a salutation.\n\nWrite in the second person, as if you were the personal assistant of the recipient.\n\nOnly return the message.\n\nWeather info from the bet:\n{{ JSON.stringify($json.answer) }}","needsFallback":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[768,208],"id":"ece189b5-5bb7-40af-8e4c-ea3b63d8eff7","name":"Weather Report Writer","retryOnFail":true},{"parameters":{"assignments":{"assignments":[{"id":"28bbae8e-745a-4cda-b4a5-a0c99f0260b4","name":"response","value":"NONE","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[544,400],"id":"0404db08-acd4-483a-8dec-e372969e101e","name":"Set 'NONE' Response"},{"parameters":{"assignments":{"assignments":[{"id":"28bbae8e-745a-4cda-b4a5-a0c99f0260b4","name":"response","value":"={{ $json.output }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1120,208],"id":"b2912835-255b-42be-8733-78f840856f9d","name":"Set Weather Response"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1056,592],"id":"27ee32b6-0e2e-4523-8446-88d52dcf7597","name":"4.1 mini","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAI account"}}}],"connections":{"GPT 4.1":{"ai_languageModel":[[{"node":"Extract Location","type":"ai_languageModel","index":0}]]},"Extract Location":{"main":[[{"node":"Location?","type":"main","index":0}]]},"Location?":{"main":[[{"node":"Query Weather Info","type":"main","index":0}],[{"node":"Set 'NONE' Response","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Extract Location","type":"main","index":0}]]},"Query Weather Info":{"main":[[{"node":"Weather Report Writer","type":"main","index":0}]]},"Claude 3.7":{"ai_languageModel":[[{"node":"Weather Report Writer","type":"ai_languageModel","index":0}]]},"Weather Report Writer":{"main":[[{"node":"Set Weather Response","type":"main","index":0}]]},"4.1 mini":{"ai_languageModel":[[{"node":"Weather Report Writer","type":"ai_languageModel","index":1}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"scheduler_response":"Here‚Äôs your schedule for today (September 22nd, 2025):\n‚Ä¢ Contract Discussion ‚Äì 6:00 PM to 7:00 PM (America/Bogota) at Osaki Calle 90, Cra. 11a #89-14, Bogot√°, Colombia.\n‚Ä¢ Gym ‚Äì 7:15 PM to 8:00 PM (America/Bogota)\nLet me know if you need more details or want to make any changes! üóìÔ∏è"}}]},"versionId":"418b1144-7153-4e8f-9bb8-5e66c5b0c6f9","triggerCount":0,"shared":[{"createdAt":"2025-09-24T20:49:38.344Z","updatedAt":"2025-09-24T20:49:38.344Z","role":"workflow:owner","workflowId":"1Bf1FtaUC4GEY3hs","projectId":"8nyfoRCh3nEYWaKJ"}],"tags":[]}