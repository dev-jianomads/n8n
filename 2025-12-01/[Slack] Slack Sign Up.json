{"updatedAt":"2025-11-25T22:07:12.776Z","createdAt":"2025-11-25T18:24:31.084Z","id":"t8fG993Y2yQNpDd8","name":"[Slack] Slack Sign Up","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"slack-sign-up","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-1120,48],"id":"a31966e1-ca8f-4e9a-9eab-7aaa6d58e8a8","name":"Webhook","webhookId":"c1d6fa40-0924-4f4b-80f1-cb3db0a71be8"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"4e2daa52-5c2f-46ab-a36d-9801b6a117dd","leftValue":"={{ $json.get_whatsapp_user }}","rightValue":"","operator":{"type":"object","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-672,48],"id":"58bceb86-4b92-4cff-8862-a2a14cf86631","name":"Found?"},{"parameters":{"respondWith":"json","responseBody":"{\n  \"error\": \"WhatsApp integration already exists\"\n}","options":{"responseCode":400}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-448,-48],"id":"bf6feffd-409c-4bbc-a658-62c2226787d0","name":"Bad Request"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"a13b1091-5d37-4b84-9c89-aacba852908e","leftValue":"={{ $json.link_slack_to_user.success }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-224,144],"id":"8b07422b-c7bb-432f-8cfc-3d15fa0696a1","name":"Success?"},{"parameters":{"respondWith":"json","responseBody":"{\n  \"message\": \"Success!\"\n}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[0,48],"id":"32d2dab2-4303-4f3a-84c9-a8a5483d09a2","name":"Success"},{"parameters":{"respondWith":"json","responseBody":"{\n  \"message\": \"Could not link WhatsApp to user. Please, try again later.\"\n}","options":{"responseCode":500}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[0,240],"id":"105e95c3-6885-401e-a705-6a46641b70d0","name":"Internal Server Error"},{"parameters":{"operation":"executeQuery","query":"SELECT public.get_slack_user('{{ $json.body.slack_user_id}}');","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-896,48],"id":"820fe610-6391-420f-85c9-76fd03e0d2b4","name":"Find User by Slack ID","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}},{"parameters":{"operation":"executeQuery","query":"-- Link the workspace\nSELECT link_slack_to_user(\n  p_user_id := '{{ $('Webhook').item.json.body.slack_user_id }}',  -- From Step 1\n  p_team_id := '{{ $('Webhook').item.json.body.team_id }}',\n  p_access_token := '{{ $('Webhook').item.json.body.token }}',\n  p_app_id := '{{ $('Webhook').item.json.body.app_id }}',\n  p_bot_user_id := '{{ $('Webhook').item.json.body-bot_user_id }}',\n  p_installing_user_id := '{{ $('Webhook').item.json.body.user_id }}'\n)","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-448,144],"id":"edd15550-4a88-4908-be72-7fee383f3f8e","name":"Link Slack to User","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}},{"parameters":{"workflowId":{"__rl":true,"value":"dl7Ouu4fFql85VAB","mode":"list","cachedResultUrl":"/workflow/dl7Ouu4fFql85VAB","cachedResultName":"[Slack] Send Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}","text":"=Hi{{ $('Get Cached User by Slack ID').item.json.display_name !== undefined && $('Get Cached User by Slack ID').item.json.display_name !== null? ' ' + $('Get Cached User by Slack ID').item.json.display_name: '' }}! I'm Tomo :wave:.  I’m here to help you plan and schedule your day."},"matchingColumns":[],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"text","displayName":"text","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"save","displayName":"save","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"boolean","removed":false},{"id":"tool_activity","displayName":"tool_activity","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"array","removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[448,48],"id":"0097f489-bac5-43b3-ae4f-6b90cf24441d","name":"Send Welcome Message (I)"},{"parameters":{"workflowId":{"__rl":true,"value":"dl7Ouu4fFql85VAB","mode":"list","cachedResultUrl":"/workflow/dl7Ouu4fFql85VAB","cachedResultName":"[Slack] Send Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}","text":"=I’m still in beta, so my responses won’t always be perfect — but I’ll keep improving, and your feedback will help me get better. Just message me here to start, and let’s make scheduling easier together!"},"matchingColumns":[],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"text","displayName":"text","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"save","displayName":"save","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"boolean","removed":false},{"id":"tool_activity","displayName":"tool_activity","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"array","removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[672,48],"id":"1a2fb70c-8995-44dc-bc41-93b44874cc90","name":"Send Welcome Message (II)"},{"parameters":{"workflowId":{"__rl":true,"value":"dl7Ouu4fFql85VAB","mode":"list","cachedResultUrl":"/workflow/dl7Ouu4fFql85VAB","cachedResultName":"[Slack] Send Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}","text":"=Here's a quick video to get you started!\n\nhttps://youtu.be/U--ZNq4RNrI"},"matchingColumns":[],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"text","displayName":"text","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"save","displayName":"save","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"boolean","removed":false},{"id":"tool_activity","displayName":"tool_activity","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"array","removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[896,48],"id":"1c870b4f-1614-4436-a464-d96d524fd641","name":"Send Welcome Message (III)"},{"parameters":{"workflowId":{"__rl":true,"value":"p5XnT4dNLsVCSXNl","mode":"list","cachedResultUrl":"/workflow/p5XnT4dNLsVCSXNl","cachedResultName":"[Slack] Get Cached User by Slack ID"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}"},"matchingColumns":["message_from_id"],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":true,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[224,48],"name":"Get Cached User by Slack ID","id":"a14955fd-2314-420e-9cc3-996186813f70"}],"connections":{"Webhook":{"main":[[{"node":"Find User by Slack ID","type":"main","index":0}]]},"Found?":{"main":[[{"node":"Bad Request","type":"main","index":0}],[{"node":"Link Slack to User","type":"main","index":0}]]},"Success?":{"main":[[{"node":"Success","type":"main","index":0}],[{"node":"Internal Server Error","type":"main","index":0}]]},"Success":{"main":[[{"node":"Get Cached User by Slack ID","type":"main","index":0}]]},"Find User by Slack ID":{"main":[[{"node":"Found?","type":"main","index":0}]]},"Link Slack to User":{"main":[[{"node":"Success?","type":"main","index":0}]]},"Send Welcome Message (I)":{"main":[[{"node":"Send Welcome Message (II)","type":"main","index":0}]]},"Send Welcome Message (II)":{"main":[[{"node":"Send Welcome Message (III)","type":"main","index":0}]]},"Get Cached User by Slack ID":{"main":[[{"node":"Send Welcome Message (I)","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"Webhook":[{"json":{"headers":{"host":"n8n.srv845833.hstgr.cloud","user-agent":"PostmanRuntime/7.48.0","content-length":"82","accept":"*/*","accept-encoding":"gzip, deflate, br","content-type":"application/json","postman-token":"6468c440-daff-4bd3-a6af-64bac4a6c82a","x-forwarded-for":"172.18.0.1","x-forwarded-host":"n8n.srv845833.hstgr.cloud","x-forwarded-port":"443","x-forwarded-proto":"https","x-forwarded-server":"fd58d051aa38","x-real-ip":"172.18.0.1"},"params":{},"query":{},"body":{"user_id":"t07ZDdtiVLduDE3RuRHGKowoSd0f","slack_user_id":"U07U3MJ9SQY","token":"abc","team_id":"xyz","app_id":"abc","bot_user_id":"xuz"},"webhookUrl":"https://n8n.srv845833.hstgr.cloud/webhook-test/wa-sign-up","executionMode":"test"}}],"Link Slack to User":[{"json":{"link_slack_to_user":{"success":true}}}]},"versionId":"6fbb9a88-ea5d-4049-b4b7-bce61c1ca638","activeVersionId":"6fbb9a88-ea5d-4049-b4b7-bce61c1ca638","triggerCount":1,"shared":[{"updatedAt":"2025-11-25T18:24:31.084Z","createdAt":"2025-11-25T18:24:31.084Z","role":"workflow:owner","workflowId":"t8fG993Y2yQNpDd8","projectId":"8nyfoRCh3nEYWaKJ"}],"activeVersion":{"updatedAt":"2025-11-25T22:07:12.779Z","createdAt":"2025-11-25T22:07:12.779Z","versionId":"6fbb9a88-ea5d-4049-b4b7-bce61c1ca638","workflowId":"t8fG993Y2yQNpDd8","nodes":[{"parameters":{"httpMethod":"POST","path":"slack-sign-up","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-1120,48],"id":"a31966e1-ca8f-4e9a-9eab-7aaa6d58e8a8","name":"Webhook","webhookId":"c1d6fa40-0924-4f4b-80f1-cb3db0a71be8"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"4e2daa52-5c2f-46ab-a36d-9801b6a117dd","leftValue":"={{ $json.get_whatsapp_user }}","rightValue":"","operator":{"type":"object","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-672,48],"id":"58bceb86-4b92-4cff-8862-a2a14cf86631","name":"Found?"},{"parameters":{"respondWith":"json","responseBody":"{\n  \"error\": \"WhatsApp integration already exists\"\n}","options":{"responseCode":400}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[-448,-48],"id":"bf6feffd-409c-4bbc-a658-62c2226787d0","name":"Bad Request"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"a13b1091-5d37-4b84-9c89-aacba852908e","leftValue":"={{ $json.link_slack_to_user.success }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-224,144],"id":"8b07422b-c7bb-432f-8cfc-3d15fa0696a1","name":"Success?"},{"parameters":{"respondWith":"json","responseBody":"{\n  \"message\": \"Success!\"\n}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[0,48],"id":"32d2dab2-4303-4f3a-84c9-a8a5483d09a2","name":"Success"},{"parameters":{"respondWith":"json","responseBody":"{\n  \"message\": \"Could not link WhatsApp to user. Please, try again later.\"\n}","options":{"responseCode":500}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[0,240],"id":"105e95c3-6885-401e-a705-6a46641b70d0","name":"Internal Server Error"},{"parameters":{"operation":"executeQuery","query":"SELECT public.get_slack_user('{{ $json.body.slack_user_id}}');","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-896,48],"id":"820fe610-6391-420f-85c9-76fd03e0d2b4","name":"Find User by Slack ID","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}},{"parameters":{"operation":"executeQuery","query":"-- Link the workspace\nSELECT link_slack_to_user(\n  p_user_id := '{{ $('Webhook').item.json.body.slack_user_id }}',  -- From Step 1\n  p_team_id := '{{ $('Webhook').item.json.body.team_id }}',\n  p_access_token := '{{ $('Webhook').item.json.body.token }}',\n  p_app_id := '{{ $('Webhook').item.json.body.app_id }}',\n  p_bot_user_id := '{{ $('Webhook').item.json.body-bot_user_id }}',\n  p_installing_user_id := '{{ $('Webhook').item.json.body.user_id }}'\n)","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-448,144],"id":"edd15550-4a88-4908-be72-7fee383f3f8e","name":"Link Slack to User","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}},{"parameters":{"workflowId":{"__rl":true,"value":"dl7Ouu4fFql85VAB","mode":"list","cachedResultUrl":"/workflow/dl7Ouu4fFql85VAB","cachedResultName":"[Slack] Send Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}","text":"=Hi{{ $('Get Cached User by Slack ID').item.json.display_name !== undefined && $('Get Cached User by Slack ID').item.json.display_name !== null? ' ' + $('Get Cached User by Slack ID').item.json.display_name: '' }}! I'm Tomo :wave:.  I’m here to help you plan and schedule your day."},"matchingColumns":[],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"text","displayName":"text","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"save","displayName":"save","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"boolean","removed":false},{"id":"tool_activity","displayName":"tool_activity","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"array","removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[448,48],"id":"0097f489-bac5-43b3-ae4f-6b90cf24441d","name":"Send Welcome Message (I)"},{"parameters":{"workflowId":{"__rl":true,"value":"dl7Ouu4fFql85VAB","mode":"list","cachedResultUrl":"/workflow/dl7Ouu4fFql85VAB","cachedResultName":"[Slack] Send Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}","text":"=I’m still in beta, so my responses won’t always be perfect — but I’ll keep improving, and your feedback will help me get better. Just message me here to start, and let’s make scheduling easier together!"},"matchingColumns":[],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"text","displayName":"text","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"save","displayName":"save","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"boolean","removed":false},{"id":"tool_activity","displayName":"tool_activity","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"array","removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[672,48],"id":"1a2fb70c-8995-44dc-bc41-93b44874cc90","name":"Send Welcome Message (II)"},{"parameters":{"workflowId":{"__rl":true,"value":"dl7Ouu4fFql85VAB","mode":"list","cachedResultUrl":"/workflow/dl7Ouu4fFql85VAB","cachedResultName":"[Slack] Send Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}","text":"=Here's a quick video to get you started!\n\nhttps://youtu.be/U--ZNq4RNrI"},"matchingColumns":[],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"text","displayName":"text","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"save","displayName":"save","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"boolean","removed":false},{"id":"tool_activity","displayName":"tool_activity","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"array","removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[896,48],"id":"1c870b4f-1614-4436-a464-d96d524fd641","name":"Send Welcome Message (III)"},{"parameters":{"workflowId":{"__rl":true,"value":"p5XnT4dNLsVCSXNl","mode":"list","cachedResultUrl":"/workflow/p5XnT4dNLsVCSXNl","cachedResultName":"[Slack] Get Cached User by Slack ID"},"workflowInputs":{"mappingMode":"defineBelow","value":{"slack_user_id":"={{ $('Webhook').item.json.body.slack_user_id }}"},"matchingColumns":["message_from_id"],"schema":[{"id":"slack_user_id","displayName":"slack_user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":true,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[224,48],"name":"Get Cached User by Slack ID","id":"a14955fd-2314-420e-9cc3-996186813f70"}],"connections":{"Webhook":{"main":[[{"node":"Find User by Slack ID","type":"main","index":0}]]},"Found?":{"main":[[{"node":"Bad Request","type":"main","index":0}],[{"node":"Link Slack to User","type":"main","index":0}]]},"Success?":{"main":[[{"node":"Success","type":"main","index":0}],[{"node":"Internal Server Error","type":"main","index":0}]]},"Success":{"main":[[{"node":"Get Cached User by Slack ID","type":"main","index":0}]]},"Find User by Slack ID":{"main":[[{"node":"Found?","type":"main","index":0}]]},"Link Slack to User":{"main":[[{"node":"Success?","type":"main","index":0}]]},"Send Welcome Message (I)":{"main":[[{"node":"Send Welcome Message (II)","type":"main","index":0}]]},"Send Welcome Message (II)":{"main":[[{"node":"Send Welcome Message (III)","type":"main","index":0}]]},"Get Cached User by Slack ID":{"main":[[{"node":"Send Welcome Message (I)","type":"main","index":0}]]}},"authors":"Dev JIA","name":null,"description":null},"tags":[]}