{"createdAt":"2025-07-16T22:25:03.267Z","updatedAt":"2025-07-16T22:42:32.381Z","id":"K7dK4EzGjSmTsV8d","name":"Get Conversation","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"phone"},{"name":"signal_uuid"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-120,0],"id":"150d6595-777a-48b4-810c-19bc5caf2a25","name":"When Executed by Another Workflow"},{"parameters":{"operation":"executeQuery","query":"SELECT\n  signal_timestamp_utc AS date,\n  message_text AS message,\n  CASE\n    WHEN direction = 'inbound' THEN 'user'\n    ELSE 'ai'\n  END AS role\nFROM\n  signal_messages\nWHERE (recipient_uuid = '{{ $('When Executed by Another Workflow').item.json.signal_uuid }}' OR sender_uuid = '{{ $('When Executed by Another Workflow').item.json.signal_uuid }}')\nOR (recipient_phone = '{{ $('When Executed by Another Workflow').item.json.phone }}' OR sender_phone = '{{ $('When Executed by Another Workflow').item.json.phone }}')\nORDER BY signal_timestamp ASC\nLIMIT 20;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[100,0],"id":"673cfd3e-cc7a-4bf3-98b9-122395826320","name":"Get Messages","retryOnFail":true,"waitBetweenTries":2000,"credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Get Messages","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"signal_uuid":"1794451c-454e-4a15-b409-99a0c19f5bcd","phone":"+573195884149"}}]},"versionId":"f2cdb67c-b35c-40a7-8ae9-7379d64883f5","triggerCount":0,"tags":[]}