{"createdAt":"2025-07-22T20:39:16.441Z","updatedAt":"2025-07-23T21:10:42.539Z","id":"BmazSSTKstkRHFz9","name":"[Signal] Search Contacts","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"query"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[0,312],"id":"f68fe61d-59f9-42aa-9e24-93217b5f5456","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultName":"Get Token for Signal Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[224,312],"id":"03a2b582-70d3-4f7a-8c8a-0a953e4146fb","name":"Get Token"},{"parameters":{"url":"=https://people.googleapis.com/v1/people:searchContacts","sendQuery":true,"queryParameters":{"parameters":[{"name":"query","value":"={{ $('When Executed by Another Workflow').item.json.query }}"},{"name":"readMask","value":"names,emailAddresses"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[448,312],"id":"71f5c2ea-944b-4476-b562-e6472c49adb0","name":"Search Contacts","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"jsonSchemaExample":"{\n  \"results\": [\n    {\"fullName\": \"Ken Wong\",\n      \"email\": \"ken@jia-nomads.com\",\n      \"number\": 1\n    },\n    {\n      \"fullName\": \"Ken Dad HK\",\n      \"email\": null,\n      \"number\": 2\n    }\n  ]\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[888,128],"id":"9ee99d88-0163-49a7-ba58-680aadf9067e","name":"Structured Output Parser"},{"parameters":{"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[712,128],"id":"9e164e05-6483-40da-bb1b-55877f909907","name":"4.1 Mini","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[892,336],"id":"54287ccf-0456-49b1-92a9-fa844d4fce32","name":"4.1_mini","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAi account"}}},{"parameters":{"promptType":"define","text":"=Take the results from Google Contact's API, and create a simplified JSON list with:\n- Contact Full Name.\n- Contact Email.\n- Number (the number of the contact in the list of results)\n\n## Input:\n{{ JSON.stringify($json.results) }}","hasOutputParser":true,"needsFallback":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[672,-96],"id":"a841c8e2-a7b6-46b1-9321-54f18f5d4440","name":"Output Formatter"},{"parameters":{"assignments":{"assignments":[{"id":"7ac574f1-cccb-426d-b676-5b9446410a0d","name":"response","value":"=There was an error: {{ JSON.stringify($json) }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[868,512],"id":"c97de964-1d47-40b1-9441-de314b3343af","name":"Error Response"},{"parameters":{"assignments":{"assignments":[{"id":"15d523a5-eab8-482c-9342-58e06eb3af35","name":"response","value":"={{$json.output.results.map(r => r.number + \". Full Name: \" + r.fullName + \"\\n  Email: \" + r.email).join(\"\\n\\n\")}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1288,112],"id":"2f0ebf93-394b-417c-a0f9-cd995adb71c5","name":"Successful Response"}],"connections":{"Get Token":{"main":[[{"node":"Search Contacts","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Search Contacts":{"main":[[{"node":"Output Formatter","type":"main","index":0}],[{"node":"Error Response","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Output Formatter","type":"ai_outputParser","index":0}]]},"4.1 Mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":0}]]},"4.1_mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":1},{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"Output Formatter":{"main":[[{"node":"Successful Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"userId":"M88dm4Whe7B1dI2MZ1ilO6cp4xxd","query":"ken"}}],"Search Contacts":[{"json":{"results":[{"person":{"resourceName":"people/c1467631864186137506","etag":"%EgcBAgkuNz0+GgECIgwvTk8zc0NsQm1XST0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"145e136795dbeba2"},"sourcePrimary":true},"displayName":"Ken Dad HK","givenName":"Ken Dad HK","displayNameLastFirst":"Ken Dad HK","unstructuredName":"Ken Dad HK"}]}},{"person":{"resourceName":"people/c5312739810180299075","etag":"%EgcBAgkuNz0+GgECIgxFYkdQaTA1ZlFqQT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"49baa4b591df7943"},"sourcePrimary":true},"displayName":"Ken Wong","familyName":"Wong","givenName":"Ken","displayNameLastFirst":"Wong, Ken","unstructuredName":"Ken Wong"}]}},{"person":{"resourceName":"people/c5370861444361165055","etag":"%EgcBAgkuNz0+GgECIgxhbE9zUCtRRG1BQT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"4a89220710fd18ff"},"sourcePrimary":true},"displayName":"Ken_冷氣清洗","givenName":"Ken_冷氣清洗","displayNameLastFirst":"Ken_冷氣清洗","unstructuredName":"Ken_冷氣清洗"}]}},{"person":{"resourceName":"people/c7078635452459776502","etag":"%EgcBAgkuNz0+GgECIgxDM2E0SU1YTHZ4bz0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"623c5d709659f9f6"},"sourcePrimary":true},"displayName":"Kennies-shop","givenName":"Kennies-shop","displayNameLastFirst":"Kennies-shop","unstructuredName":"Kennies-shop"}]}},{"person":{"resourceName":"people/c641478538677446606","etag":"%EgcBAgkuNz0+GgECIgwvUkN4OGVqTitWUT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"8e6fd550ce7e7ce"},"sourcePrimary":true},"displayName":"Carmen Ken","familyName":"Ken","givenName":"Carmen","displayNameLastFirst":"Ken, Carmen","unstructuredName":"Carmen Ken"}]}}]}}]},"versionId":"0c9a35aa-f980-46f0-8ae9-aa575f30dd81","triggerCount":0,"tags":[]}