{"updatedAt":"2026-01-05T17:52:38.355Z","createdAt":"2026-01-05T17:52:08.022Z","id":"uHCvnmL-goDfJsL_xNmsr","name":"[TOMO] Find Time","active":true,"isArchived":false,"nodes":[{"parameters":{"method":"POST","url":"https://www.googleapis.com/calendar/v3/freeBusy","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('Get Token').first().json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"timeMin","value":"={{ $('When Executed by Another Workflow').item.json.from }}"},{"name":"timeMax","value":"={{ $('When Executed by Another Workflow').item.json.to }}"},{"name":"timeZone","value":"={{ $('When Executed by Another Workflow').first().json.timeZone }}"},{"name":"items","value":"={{ [{\"id\": \"primary\"}] }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-336,256],"id":"bc72e3c9-bce4-486a-ad40-a77de4d33150","name":"Get Free Busy Data","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"limit","type":"number"},{"name":"from"},{"name":"to"},{"name":"timeZone"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1008,256],"id":"8534d36b-9cf5-454c-a470-8c3d4fb8f688","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $('When Executed by Another Workflow').item.json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-560,256],"id":"da25ec52-fd3b-4375-baee-84117c4a512a","name":"Get Token"},{"parameters":{"assignments":{"assignments":[{"id":"9f092131-4eb5-4f4d-8bb5-ced3bd034685","name":"message","value":"There was an error. Try later.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[80,448],"id":"ba98afe8-f85a-4772-8232-03ca594b2381","name":"Set Error Message"},{"parameters":{"promptType":"define","text":"=Convert the \"start\" and \"end\" times of each element in the input array to the following time zone: {{ $('When Executed by Another Workflow').first().json.timeZone }}\n\n## Input\n{{ JSON.stringify($json.calendars.primary) }}","hasOutputParser":true,"needsFallback":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-112,-160],"id":"b9156a53-bf77-4ad1-8247-f07543fcf362","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"gpt-4.1-mini"},"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[48,272],"id":"6edb799b-366a-460d-a962-f2a2240f1b68","name":"4.1 mini","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAI account"}}},{"parameters":{"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-16,64],"id":"1b423b23-0aa8-494c-842d-cae298c635f1","name":"OpenAI 4.1 mini","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"jsonSchemaExample":"\n{\n\"primary\": \n{\n\"busy\": \n[\n{\n\"start\": \n\"2025-07-25T08:00:00+09:00\",\n\"end\": \n\"2025-07-25T09:00:00+09:00\"\n},\n{\n\"start\": \n\"2025-07-25T10:00:00+09:00\",\n\"end\": \n\"2025-07-25T12:00:00+09:00\"\n},\n{\n\"start\": \n\"2025-07-25T12:30:00+09:00\",\n\"end\": \n\"2025-07-25T13:30:00+09:00\"\n},\n{\n\"start\": \n\"2025-07-25T14:00:00+09:00\",\n\"end\": \n\"2025-07-25T16:00:00+09:00\"\n}\n]\n}\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[112,64],"id":"779466a6-478d-4e67-8dde-15a478678fff","name":"Structured Output Parser"}],"connections":{"Get Free Busy Data":{"main":[[{"node":"AI Agent","type":"main","index":0}],[{"node":"Set Error Message","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"Get Free Busy Data","type":"main","index":0}]]},"4.1 mini":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0},{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"OpenAI 4.1 mini":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":1}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]}},"settings":{"executionOrder":"v1","availableInMCP":false},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"userId":"t07ZDdtiVLduDE3RuRHGKowoSd0f","limit":10,"from":"2025-11-04T00:00:00-05:00","to":"2025-11-05T00:00:00-05:00","channel_id":"1598386790","message_ts":"4387","slack_user_id":"abc"}}]},"versionId":"eebd5265-d91d-453d-9cdb-63941f3e642b","activeVersionId":"eebd5265-d91d-453d-9cdb-63941f3e642b","triggerCount":0,"shared":[{"updatedAt":"2026-01-05T17:52:08.022Z","createdAt":"2026-01-05T17:52:08.022Z","role":"workflow:owner","workflowId":"uHCvnmL-goDfJsL_xNmsr","projectId":"8nyfoRCh3nEYWaKJ"}],"activeVersion":{"updatedAt":"2026-01-05T17:52:41.955Z","createdAt":"2026-01-05T17:52:38.356Z","versionId":"eebd5265-d91d-453d-9cdb-63941f3e642b","workflowId":"uHCvnmL-goDfJsL_xNmsr","nodes":[{"parameters":{"method":"POST","url":"https://www.googleapis.com/calendar/v3/freeBusy","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('Get Token').first().json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"timeMin","value":"={{ $('When Executed by Another Workflow').item.json.from }}"},{"name":"timeMax","value":"={{ $('When Executed by Another Workflow').item.json.to }}"},{"name":"timeZone","value":"={{ $('When Executed by Another Workflow').first().json.timeZone }}"},{"name":"items","value":"={{ [{\"id\": \"primary\"}] }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-336,256],"id":"bc72e3c9-bce4-486a-ad40-a77de4d33150","name":"Get Free Busy Data","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"limit","type":"number"},{"name":"from"},{"name":"to"},{"name":"timeZone"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1008,256],"id":"8534d36b-9cf5-454c-a470-8c3d4fb8f688","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $('When Executed by Another Workflow').item.json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-560,256],"id":"da25ec52-fd3b-4375-baee-84117c4a512a","name":"Get Token"},{"parameters":{"assignments":{"assignments":[{"id":"9f092131-4eb5-4f4d-8bb5-ced3bd034685","name":"message","value":"There was an error. Try later.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[80,448],"id":"ba98afe8-f85a-4772-8232-03ca594b2381","name":"Set Error Message"},{"parameters":{"promptType":"define","text":"=Convert the \"start\" and \"end\" times of each element in the input array to the following time zone: {{ $('When Executed by Another Workflow').first().json.timeZone }}\n\n## Input\n{{ JSON.stringify($json.calendars.primary) }}","hasOutputParser":true,"needsFallback":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-112,-160],"id":"b9156a53-bf77-4ad1-8247-f07543fcf362","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"gpt-4.1-mini"},"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[48,272],"id":"6edb799b-366a-460d-a962-f2a2240f1b68","name":"4.1 mini","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAI account"}}},{"parameters":{"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-16,64],"id":"1b423b23-0aa8-494c-842d-cae298c635f1","name":"OpenAI 4.1 mini","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"jsonSchemaExample":"\n{\n\"primary\": \n{\n\"busy\": \n[\n{\n\"start\": \n\"2025-07-25T08:00:00+09:00\",\n\"end\": \n\"2025-07-25T09:00:00+09:00\"\n},\n{\n\"start\": \n\"2025-07-25T10:00:00+09:00\",\n\"end\": \n\"2025-07-25T12:00:00+09:00\"\n},\n{\n\"start\": \n\"2025-07-25T12:30:00+09:00\",\n\"end\": \n\"2025-07-25T13:30:00+09:00\"\n},\n{\n\"start\": \n\"2025-07-25T14:00:00+09:00\",\n\"end\": \n\"2025-07-25T16:00:00+09:00\"\n}\n]\n}\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[112,64],"id":"779466a6-478d-4e67-8dde-15a478678fff","name":"Structured Output Parser"}],"connections":{"Get Free Busy Data":{"main":[[{"node":"AI Agent","type":"main","index":0}],[{"node":"Set Error Message","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"Get Free Busy Data","type":"main","index":0}]]},"4.1 mini":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0},{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"OpenAI 4.1 mini":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":1}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]}},"authors":"Dev JIA","name":"Version eebd5265","description":"","autosaved":false},"tags":[]}