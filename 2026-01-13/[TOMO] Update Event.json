{"updatedAt":"2026-01-05T18:00:53.617Z","createdAt":"2026-01-05T18:00:43.213Z","id":"OXz0SSfqA_8_H1v0-QCyI","name":"[TOMO] Update Event","active":true,"isArchived":false,"nodes":[{"parameters":{"assignments":{"assignments":[{"id":"901f3674-46a1-49bd-8ecc-d00442ddfa0d","name":"attendees","value":"={{ ($('When Executed by Another Workflow').item.json.attendees.trim() === \"NONE\" ? [] : \n$('When Executed by Another Workflow').item.json.attendees.trim().split(\",\").map(item => item.trim()))}}","type":"array"},{"id":"31775448-3649-4e21-bc93-c91cb76b015e","name":"endDate","value":"={{ DateTime.fromISO($('When Executed by Another Workflow').item.json.start).plus($('When Executed by Another Workflow').item.json.duration, 'minutes') }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-768,256],"id":"1ab499af-aafb-4a32-863f-213866d69a4c","name":"Set Attendees & End Date"},{"parameters":{"workflowInputs":{"values":[{"name":"start"},{"name":"duration","type":"number"},{"name":"location"},{"name":"userId"},{"name":"attendees"},{"name":"eventId"},{"name":"summary"},{"name":"timeZone"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1216,256],"id":"4b348384-0b78-44ce-a88e-de8129f4da86","name":"When Executed by Another Workflow"},{"parameters":{"assignments":{"assignments":[{"id":"eaeff086-d372-4bda-87f5-921f851d42fe","name":"message","value":"Failed to create event.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-96,352],"id":"27f7c233-3fd4-4eec-bd01-674fbc257daf","name":"Set Failure Message"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $('When Executed by Another Workflow').item.json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-992,256],"id":"09d4c6c6-8b14-4a94-9143-61b5c82e1d0f","name":"Get Token"},{"parameters":{"assignments":{"assignments":[{"id":"5d84818c-0591-4a66-8e15-dc78fa0caac8","name":"htmlLink","value":"={{ $json.htmlLink }}","type":"string"},{"id":"4e85c58d-a01d-428f-b40b-a138a33a710e","name":"hangoutLink","value":"={{ $json.hangoutLink }}","type":"string"},{"id":"6a1f823d-d81d-4c71-a23d-406c3b0e5db2","name":"start","value":"={{ $json.start }}","type":"object"},{"id":"65a5f7b7-67ff-4e24-b1ed-9d1ad4bae389","name":"end","value":"={{ $json.end }}","type":"object"},{"id":"09d9ddb8-fbf5-46b7-98fa-98a0a5ba10b7","name":"attendees","value":"={{ $json.attendees.map(item => item.email) }}","type":"array"},{"id":"2fe300e1-bc82-4af2-bb24-fa535b33cfd4","name":"creator","value":"={{ $json.creator.email }}","type":"string"},{"id":"ebbbcbba-6c38-4fa3-8676-01e12e9419c8","name":"organizer","value":"={{ $json.organizer.email }}","type":"string"},{"id":"cf04dbbe-55de-4fc0-9991-0335e596c6e7","name":"summary","value":"={{ $json.summary }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-96,160],"id":"52bcfaac-5aef-441e-bdb2-9e6e468785ff","name":"Set Event Info"},{"parameters":{"method":"PUT","url":"=https://www.googleapis.com/calendar/v3/calendars/primary/events/{{ $('When Executed by Another Workflow').item.json.eventId }}","sendQuery":true,"queryParameters":{"parameters":[{"name":"sendUpdates","value":"all"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('Get Token').item.json.accessToken }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify($json.calendarRequest) }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-320,256],"id":"c36cbc70-3f0e-44a1-af3b-b40e4db56c4b","name":"Update Event","retryOnFail":true,"maxTries":5,"onError":"continueErrorOutput"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"// This script creates a JSON object for UPDATING a Google Calendar event.\n// It only includes the fields that are being modified.\n\n$input.item.json.calendarRequest = {\n  // Set the start time from the workflow input\n  start: {\n    dateTime: $('When Executed by Another Workflow').item.json.start,\n    timeZone: $('When Executed by Another Workflow').item.json.timeZone\n  },\n  // Set the end time (assuming it's pre-calculated from start + duration in a previous step)\n  end: {\n    dateTime: $json.endDate,\n    timeZone: $('When Executed by Another Workflow').item.json.timeZone\n  },\n  // Set the location from the workflow input\n  location: $('When Executed by Another Workflow').item.json.location,\n  // Replace the attendee list with the new one from the workflow input\n  attendees: $json.attendees?.map(email => ({ email })) ?? [],\n  summary: $('When Executed by Another Workflow').item.json.summary\n};\n\nreturn $input.item;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-544,256],"id":"f9042a6b-f463-4c1f-a452-e02622d190b2","name":"Create Update Event Request"}],"connections":{"Set Attendees & End Date":{"main":[[{"node":"Create Update Event Request","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"Set Attendees & End Date","type":"main","index":0}]]},"Update Event":{"main":[[{"node":"Set Event Info","type":"main","index":0}],[{"node":"Set Failure Message","type":"main","index":0}]]},"Create Update Event Request":{"main":[[{"node":"Update Event","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","availableInMCP":false},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"start":"2025-08-05T17:00:00-05:00","duration":165,"location":"","userId":"d24503d6-48da-4af1-8599-177cd8501341","attendees":"NONE","eventId":"7iul5pu6g1c5lhpd54nvj7n9rs","channel_id":"1598386790","message_ts":"4387","slack_user_id":"abc"}}]},"versionId":"a3dfc389-0418-4a2b-9cdd-85c257b64965","activeVersionId":"a3dfc389-0418-4a2b-9cdd-85c257b64965","triggerCount":0,"shared":[{"updatedAt":"2026-01-05T18:00:43.213Z","createdAt":"2026-01-05T18:00:43.213Z","role":"workflow:owner","workflowId":"OXz0SSfqA_8_H1v0-QCyI","projectId":"8nyfoRCh3nEYWaKJ"}],"activeVersion":{"updatedAt":"2026-01-05T18:02:58.390Z","createdAt":"2026-01-05T18:00:53.618Z","versionId":"a3dfc389-0418-4a2b-9cdd-85c257b64965","workflowId":"OXz0SSfqA_8_H1v0-QCyI","nodes":[{"parameters":{"assignments":{"assignments":[{"id":"901f3674-46a1-49bd-8ecc-d00442ddfa0d","name":"attendees","value":"={{ ($('When Executed by Another Workflow').item.json.attendees.trim() === \"NONE\" ? [] : \n$('When Executed by Another Workflow').item.json.attendees.trim().split(\",\").map(item => item.trim()))}}","type":"array"},{"id":"31775448-3649-4e21-bc93-c91cb76b015e","name":"endDate","value":"={{ DateTime.fromISO($('When Executed by Another Workflow').item.json.start).plus($('When Executed by Another Workflow').item.json.duration, 'minutes') }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-768,256],"id":"1ab499af-aafb-4a32-863f-213866d69a4c","name":"Set Attendees & End Date"},{"parameters":{"workflowInputs":{"values":[{"name":"start"},{"name":"duration","type":"number"},{"name":"location"},{"name":"userId"},{"name":"attendees"},{"name":"eventId"},{"name":"summary"},{"name":"timeZone"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1216,256],"id":"4b348384-0b78-44ce-a88e-de8129f4da86","name":"When Executed by Another Workflow"},{"parameters":{"assignments":{"assignments":[{"id":"eaeff086-d372-4bda-87f5-921f851d42fe","name":"message","value":"Failed to create event.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-96,352],"id":"27f7c233-3fd4-4eec-bd01-674fbc257daf","name":"Set Failure Message"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $('When Executed by Another Workflow').item.json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-992,256],"id":"09d4c6c6-8b14-4a94-9143-61b5c82e1d0f","name":"Get Token"},{"parameters":{"assignments":{"assignments":[{"id":"5d84818c-0591-4a66-8e15-dc78fa0caac8","name":"htmlLink","value":"={{ $json.htmlLink }}","type":"string"},{"id":"4e85c58d-a01d-428f-b40b-a138a33a710e","name":"hangoutLink","value":"={{ $json.hangoutLink }}","type":"string"},{"id":"6a1f823d-d81d-4c71-a23d-406c3b0e5db2","name":"start","value":"={{ $json.start }}","type":"object"},{"id":"65a5f7b7-67ff-4e24-b1ed-9d1ad4bae389","name":"end","value":"={{ $json.end }}","type":"object"},{"id":"09d9ddb8-fbf5-46b7-98fa-98a0a5ba10b7","name":"attendees","value":"={{ $json.attendees.map(item => item.email) }}","type":"array"},{"id":"2fe300e1-bc82-4af2-bb24-fa535b33cfd4","name":"creator","value":"={{ $json.creator.email }}","type":"string"},{"id":"ebbbcbba-6c38-4fa3-8676-01e12e9419c8","name":"organizer","value":"={{ $json.organizer.email }}","type":"string"},{"id":"cf04dbbe-55de-4fc0-9991-0335e596c6e7","name":"summary","value":"={{ $json.summary }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-96,160],"id":"52bcfaac-5aef-441e-bdb2-9e6e468785ff","name":"Set Event Info"},{"parameters":{"method":"PUT","url":"=https://www.googleapis.com/calendar/v3/calendars/primary/events/{{ $('When Executed by Another Workflow').item.json.eventId }}","sendQuery":true,"queryParameters":{"parameters":[{"name":"sendUpdates","value":"all"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('Get Token').item.json.accessToken }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify($json.calendarRequest) }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-320,256],"id":"c36cbc70-3f0e-44a1-af3b-b40e4db56c4b","name":"Update Event","retryOnFail":true,"maxTries":5,"onError":"continueErrorOutput"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"// This script creates a JSON object for UPDATING a Google Calendar event.\n// It only includes the fields that are being modified.\n\n$input.item.json.calendarRequest = {\n  // Set the start time from the workflow input\n  start: {\n    dateTime: $('When Executed by Another Workflow').item.json.start,\n    timeZone: $('When Executed by Another Workflow').item.json.timeZone\n  },\n  // Set the end time (assuming it's pre-calculated from start + duration in a previous step)\n  end: {\n    dateTime: $json.endDate,\n    timeZone: $('When Executed by Another Workflow').item.json.timeZone\n  },\n  // Set the location from the workflow input\n  location: $('When Executed by Another Workflow').item.json.location,\n  // Replace the attendee list with the new one from the workflow input\n  attendees: $json.attendees?.map(email => ({ email })) ?? [],\n  summary: $('When Executed by Another Workflow').item.json.summary\n};\n\nreturn $input.item;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-544,256],"id":"f9042a6b-f463-4c1f-a452-e02622d190b2","name":"Create Update Event Request"}],"connections":{"Set Attendees & End Date":{"main":[[{"node":"Create Update Event Request","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"Set Attendees & End Date","type":"main","index":0}]]},"Update Event":{"main":[[{"node":"Set Event Info","type":"main","index":0}],[{"node":"Set Failure Message","type":"main","index":0}]]},"Create Update Event Request":{"main":[[{"node":"Update Event","type":"main","index":0}]]}},"authors":"Dev JIA","name":"Version a3dfc389","description":"","autosaved":false},"tags":[]}