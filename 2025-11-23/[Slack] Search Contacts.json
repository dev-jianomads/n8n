{"updatedAt":"2025-11-22T21:55:41.463Z","createdAt":"2025-11-22T21:55:11.828Z","id":"4p26ZS2Rx7FQxswg","name":"[Slack] Search Contacts","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"query"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-400,496],"id":"f6824d81-9809-4d00-b46e-29cf556f1ea5","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-176,496],"id":"d3f17851-45fe-4840-8b68-c0427d53e3fb","name":"Get Token"},{"parameters":{"url":"=https://people.googleapis.com/v1/people:searchContacts","sendQuery":true,"queryParameters":{"parameters":[{"name":"query","value":"={{ $('When Executed by Another Workflow').item.json.query }}"},{"name":"readMask","value":"names,emailAddresses"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[48,496],"id":"44db062c-655e-4d5a-9f6e-789afb96cd2c","name":"Search Contacts","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"jsonSchemaExample":"{\n  \"results\": [\n    {\"fullName\": \"Ken Wong\",\n      \"email\": \"ken@jia-nomads.com\",\n      \"number\": 1\n    },\n    {\n      \"fullName\": \"Ken Dad HK\",\n      \"email\": null,\n      \"number\": 2\n    }\n  ]\n}","autoFix":true},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[496,304],"id":"973e03e0-d389-4c37-beb7-f2b443a13e72","name":"Structured Output Parser"},{"parameters":{"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[320,304],"id":"4f4f1709-a3fd-4056-9694-1dd8899e6520","name":"4.1 Mini","credentials":{"openRouterApi":{"id":"SeBKTiKFu0nP1GsL","name":"OpenRouter account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{"temperature":0}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[496,512],"id":"b525d683-0f29-4e4a-8b9f-e30afa7c9233","name":"4.1_mini","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAI account"}}},{"parameters":{"promptType":"define","text":"=Take the results from Google Contact's API, and create a simplified JSON list with:\n- Contact Full Name.\n- Contact Email.\n- Number (the number of the contact in the list of results)\n\n## Input:\n{{ JSON.stringify($json.results) }}","hasOutputParser":true,"needsFallback":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[272,80],"id":"68b7d063-2458-4c12-8720-af745ef48c7c","name":"Output Formatter"},{"parameters":{"assignments":{"assignments":[{"id":"7ac574f1-cccb-426d-b676-5b9446410a0d","name":"response","value":"=There was an error: {{ JSON.stringify($json) }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[480,688],"id":"87c4190b-461e-4265-991d-d3c38d7a98ac","name":"Error Response"},{"parameters":{"assignments":{"assignments":[{"id":"15d523a5-eab8-482c-9342-58e06eb3af35","name":"response","value":"={{$json.output.results.map(r => r.number + \". Full Name: \" + r.fullName + \"\\n  Email: \" + r.email).join(\"\\n\\n\")}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[896,288],"id":"6145f597-d44d-48f9-a9f5-323efdb069c7","name":"Successful Response"},{"parameters":{"url":"=https://people.googleapis.com/v1/otherContacts","sendQuery":true,"queryParameters":{"parameters":[{"name":"readMask","value":"names,emailAddresses"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-400,912],"id":"7900b88e-2b88-4a58-8670-10bc44b51434","name":"Search Contacts1","retryOnFail":true,"alwaysOutputData":false,"disabled":true,"onError":"continueErrorOutput"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Get Token","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"Search Contacts","type":"main","index":0}]]},"Search Contacts":{"main":[[{"node":"Output Formatter","type":"main","index":0}],[{"node":"Error Response","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"Output Formatter","type":"ai_outputParser","index":0}]]},"4.1 Mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":0}]]},"4.1_mini":{"ai_languageModel":[[{"node":"Output Formatter","type":"ai_languageModel","index":1},{"node":"Structured Output Parser","type":"ai_languageModel","index":0}]]},"Output Formatter":{"main":[[{"node":"Successful Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"userId":"0HpJe5sETk3z9thjekbyzmfSX5Fo","query":"ken"}}],"Search Contacts":[{"json":{"results":[{"person":{"resourceName":"people/c1467631864186137506","etag":"%EgcBAgkuNz0+GgECIgwvTk8zc0NsQm1XST0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"145e136795dbeba2"},"sourcePrimary":true},"displayName":"Ken Dad HK","givenName":"Ken Dad HK","displayNameLastFirst":"Ken Dad HK","unstructuredName":"Ken Dad HK"}]}},{"person":{"resourceName":"people/c5312739810180299075","etag":"%EgcBAgkuNz0+GgECIgxFYkdQaTA1ZlFqQT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"49baa4b591df7943"},"sourcePrimary":true},"displayName":"Ken Wong","familyName":"Wong","givenName":"Ken","displayNameLastFirst":"Wong, Ken","unstructuredName":"Ken Wong"}]}},{"person":{"resourceName":"people/c5370861444361165055","etag":"%EgcBAgkuNz0+GgECIgxhbE9zUCtRRG1BQT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"4a89220710fd18ff"},"sourcePrimary":true},"displayName":"Ken_冷氣清洗","givenName":"Ken_冷氣清洗","displayNameLastFirst":"Ken_冷氣清洗","unstructuredName":"Ken_冷氣清洗"}]}},{"person":{"resourceName":"people/c7078635452459776502","etag":"%EgcBAgkuNz0+GgECIgxDM2E0SU1YTHZ4bz0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"623c5d709659f9f6"},"sourcePrimary":true},"displayName":"Kennies-shop","givenName":"Kennies-shop","displayNameLastFirst":"Kennies-shop","unstructuredName":"Kennies-shop"}]}},{"person":{"resourceName":"people/c641478538677446606","etag":"%EgcBAgkuNz0+GgECIgwvUkN4OGVqTitWUT0=","names":[{"metadata":{"primary":true,"source":{"type":"CONTACT","id":"8e6fd550ce7e7ce"},"sourcePrimary":true},"displayName":"Carmen Ken","familyName":"Ken","givenName":"Carmen","displayNameLastFirst":"Ken, Carmen","unstructuredName":"Carmen Ken"}]}}]}}]},"versionId":"8bcaec27-82f5-4c4e-9e28-5a417cd41e74","triggerCount":0,"shared":[{"updatedAt":"2025-11-22T21:55:11.828Z","createdAt":"2025-11-22T21:55:11.828Z","role":"workflow:owner","workflowId":"4p26ZS2Rx7FQxswg","projectId":"8nyfoRCh3nEYWaKJ"}],"tags":[]}