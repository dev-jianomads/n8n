{"updatedAt":"2025-11-03T20:45:58.512Z","createdAt":"2025-08-19T13:12:28.405Z","id":"TZuljxjpTAPlnsXB","name":"[TG] Search Contacts in Vector Store","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"user_id"},{"name":"query"},{"name":"message_id"},{"name":"chat_id"}]}},"id":"c055762a-8fe7-4141-a639-df2372f30060","typeVersion":1.1,"name":"When Executed by Another Workflow","type":"n8n-nodes-base.executeWorkflowTrigger","position":[-144,336]},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[160,304],"id":"e0726c0e-749d-4907-9902-7de16f7e0e46","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"JNBPFneOXwzjzSKh","name":"OpenAI account"}}},{"parameters":{"mode":"load","prompt":"={{ $json.query }}","topK":5,"options":{"metadata":{"metadataValues":[{"name":"user_id","value":"={{ $json.user_id }}"},{"name":"source","value":"google"}]}}},"type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","typeVersion":1.3,"position":[80,80],"id":"e1cb90ac-235c-4e0f-a4ea-3251c474cb89","name":"[Google] Contacts","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}},{"parameters":{"mode":"load","prompt":"={{ $json.query }}","topK":5,"options":{"metadata":{"metadataValues":[{"name":"user_id","value":"={{ $json.user_id }}"},{"name":"source","value":"conversation"}]}}},"type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","typeVersion":1.3,"position":[80,576],"id":"edf17c26-1be2-4ea4-a3b1-e84b457cace0","name":"[Conversation] Contacts","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}},{"parameters":{"assignments":{"assignments":[{"id":"e599b1de-86bc-475c-a2a7-937e9dcde816","name":"pageContent","value":"={{ $json.document.pageContent }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[880,320],"id":"f4f52c52-bcd9-4715-a9da-88fd31a5821b","name":"Simplify Output"},{"parameters":{"operation":"editMessageText","chatId":"={{ $json.chat_id }}","messageId":"={{ $json.message_id }}","text":"<i>Searching contacts... üîç</i>","additionalFields":{"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[432,432],"id":"e08f1a4e-ea5c-41ac-9f1a-f6d77c343de2","name":"Edit a text message","webhookId":"ad56dc99-91d1-4c6e-a23e-1e34327e41dd","credentials":{"telegramApi":{"id":"ZhOp4IaJqCFjHFqK","name":"Ask Tomo (PROD)"}},"onError":"continueRegularOutput"},{"parameters":{"mode":"chooseBranch"},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[656,320],"id":"1df8c7bb-b84c-4090-937d-13340f4098ed","name":"Choose Branch 1"},{"parameters":{},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[432,192],"id":"2589dcaa-4cf5-4f7c-a174-afbbe147655b","name":"Append"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"[Google] Contacts","type":"main","index":0},{"node":"[Conversation] Contacts","type":"main","index":0},{"node":"Edit a text message","type":"main","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"[Google] Contacts","type":"ai_embedding","index":0},{"node":"[Conversation] Contacts","type":"ai_embedding","index":0}]]},"[Google] Contacts":{"main":[[{"node":"Append","type":"main","index":0}]]},"[Conversation] Contacts":{"main":[[{"node":"Append","type":"main","index":1}]]},"Edit a text message":{"main":[[{"node":"Choose Branch 1","type":"main","index":1}]]},"Choose Branch 1":{"main":[[{"node":"Simplify Output","type":"main","index":0}]]},"Append":{"main":[[{"node":"Choose Branch 1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"user_id":"qZT6blvRgXN0eb2GWKK7gQCBbY2s","query":"Geoff"}}]},"versionId":"92f84f86-9a16-4972-ad2a-7f5c6e2286df","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-08-19T13:12:28.405Z","createdAt":"2025-08-19T13:12:28.405Z","role":"workflow:owner","workflowId":"TZuljxjpTAPlnsXB","projectId":"8nyfoRCh3nEYWaKJ"}],"activeVersion":null,"tags":[]}