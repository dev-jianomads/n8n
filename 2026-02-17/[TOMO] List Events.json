{"updatedAt":"2026-01-20T21:28:05.435Z","createdAt":"2026-01-05T17:50:34.827Z","id":"LjSEwFsmXVLHsEyTHOc32","name":"[TOMO] List Events","active":true,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"from"},{"name":"to"},{"name":"timeZone"},{"name":"query"},{"name":"extra_params","type":"object"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1392,80],"id":"dfd06cd0-1ba2-402b-9099-ad528b0ff644","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $('When Executed by Another Workflow').item.json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-944,80],"id":"b2705385-27aa-4a4e-8358-ab21bc3ae9c1","name":"Get Token"},{"parameters":{"assignments":{"assignments":[{"id":"9f092131-4eb5-4f4d-8bb5-ced3bd034685","name":"message","value":"There was an error. Try later.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-496,176],"id":"117c4caf-a99e-4bdb-8466-6c0f4bbd7947","name":"Set Error Message"},{"parameters":{"url":"https://www.googleapis.com/calendar/v3/calendars/primary/events","sendQuery":true,"queryParameters":{"parameters":[{"name":"q","value":"={{ $('When Executed by Another Workflow').first().json.query }}"},{"name":"timeMin","value":"={{ $('When Executed by Another Workflow').item.json.from }}"},{"name":"timeMax","value":"={{ $('When Executed by Another Workflow').item.json.to }}"},{"name":"timeZone","value":"={{ $('When Executed by Another Workflow').first().json.timeZone }}"},{"name":"singleEvents","value":"true"},{"name":"orderBy","value":"startTime"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('Get Token').first().json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-720,80],"id":"0e1c514b-d477-48c8-8448-b8066c283e14","name":"List Events","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"fieldToSplitOut":"items","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-496,-16],"id":"3123c7a3-b300-44d7-ad65-40f493589dc4","name":"Split Out","alwaysOutputData":true},{"parameters":{"assignments":{"assignments":[{"id":"9ef9218c-e8ae-453d-b020-762e44794aa9","name":"status","value":"={{ $json.status }}","type":"string"},{"id":"9f5f69b2-0a57-4592-8731-02a08e6b0189","name":"creator","value":"={{ $json.creator }}","type":"object"},{"id":"bb6e0edb-1191-460a-b053-e827e6ad6792","name":"start","value":"={{ $json.start }}","type":"object"},{"id":"9bc6be0d-682b-426e-9868-be99e189bed0","name":"end","value":"={{ $json.end }}","type":"object"},{"id":"5bac55ef-1377-492d-871a-304f84b4157d","name":"summary","value":"={{ $json.summary }}","type":"string"},{"id":"82976509-447e-4062-bd9d-d1377a1ef793","name":"attendees","value":"={{ $json.attendees.filter(a => a.email !== $('Get Token').item.json.user.email) }}","type":"array"},{"id":"fb9498ec-e991-4050-9fdc-e0a88cd4276d","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"a39250b4-5346-429e-b658-a53a53412d6b","name":"location","value":"={{ $json.location }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-48,80],"id":"a12f89ec-37b6-4b67-aff3-1596262918a2","name":"Simplify Event"},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"events","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[176,80],"id":"9f3f9c25-1ddb-4303-abd4-96791bdb6def","name":"Consolidate Events"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"8e6a0513-16b2-4eca-9e5b-5c586b1a4b1e","leftValue":"={{ $json }}","rightValue":"","operator":{"type":"object","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-272,-16],"id":"abb1b81f-bef2-43cd-8634-2ee9c4267ec0","name":"Empty?"},{"parameters":{"assignments":{"assignments":[{"id":"4fac521a-301f-4c62-a3fb-11df925dffae","name":"events","value":"={{ [] }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-48,-112],"id":"8bf3e99f-9e63-420d-af94-bc7cc1d709bc","name":"Empty Events"},{"parameters":{"workflowId":{"__rl":true,"value":"t-u8ZwcwhVML6GdeISc_t","mode":"list","cachedResultUrl":"/workflow/t-u8ZwcwhVML6GdeISc_t","cachedResultName":"Edit Service Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"extra_params":"={{ $json.extra_params }}","message":"={{ $json.extra_params.params === \"slack\" ? \"_Listing events... :calendar: :clipboard:_\" : \"<i>Listing events... üóìÔ∏èüìã</i>\" }}"},"matchingColumns":[],"schema":[{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"extra_params","displayName":"extra_params","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[-1168,80],"id":"771815af-5ab4-4ef2-9a01-06a19b07e2ce","name":"Call 'Edit Service Message'","onError":"continueRegularOutput"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Call 'Edit Service Message'","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"List Events","type":"main","index":0}]]},"List Events":{"main":[[{"node":"Split Out","type":"main","index":0}],[{"node":"Set Error Message","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"Empty?","type":"main","index":0}]]},"Simplify Event":{"main":[[{"node":"Consolidate Events","type":"main","index":0}]]},"Empty?":{"main":[[{"node":"Empty Events","type":"main","index":0}],[{"node":"Simplify Event","type":"main","index":0}]]},"Call 'Edit Service Message'":{"main":[[{"node":"Get Token","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","availableInMCP":false},"staticData":null,"meta":null,"pinData":{"When Executed by Another Workflow":[{"json":{"userId":"1IUzo3Dc3BdIwXUaaxxS4XlmKgn1","from":"2025-08-28T00:00:00+08:00","to":"2025-08-29T00:00:00+08:00","timeZone":"Asia/Hong_Kong","query":"","extra_params":{"service":"slack","params":{"slack_user_id":"U07U3MJ9SQY","channel_id":"1598386790","message_ts":"4387"}}}}]},"versionId":"f49cd088-76df-4d8e-b33e-4cb0d26e7302","activeVersionId":"f49cd088-76df-4d8e-b33e-4cb0d26e7302","triggerCount":0,"shared":[{"updatedAt":"2026-01-05T17:50:34.827Z","createdAt":"2026-01-05T17:50:34.827Z","role":"workflow:owner","workflowId":"LjSEwFsmXVLHsEyTHOc32","projectId":"8nyfoRCh3nEYWaKJ"}],"activeVersion":{"updatedAt":"2026-01-20T21:28:07.077Z","createdAt":"2026-01-20T21:28:05.436Z","versionId":"f49cd088-76df-4d8e-b33e-4cb0d26e7302","workflowId":"LjSEwFsmXVLHsEyTHOc32","nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"userId"},{"name":"from"},{"name":"to"},{"name":"timeZone"},{"name":"query"},{"name":"extra_params","type":"object"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1392,80],"id":"dfd06cd0-1ba2-402b-9099-ad528b0ff644","name":"When Executed by Another Workflow"},{"parameters":{"workflowId":{"__rl":true,"value":"pE2lsrstziYiLtF8","mode":"list","cachedResultUrl":"/workflow/pE2lsrstziYiLtF8","cachedResultName":"[TG] Get Token for Telegram Integration"},"workflowInputs":{"mappingMode":"defineBelow","value":{"user_id":"={{ $('When Executed by Another Workflow').item.json.userId }}"},"matchingColumns":["user_id"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string"}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-944,80],"id":"b2705385-27aa-4a4e-8358-ab21bc3ae9c1","name":"Get Token"},{"parameters":{"assignments":{"assignments":[{"id":"9f092131-4eb5-4f4d-8bb5-ced3bd034685","name":"message","value":"There was an error. Try later.","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-496,176],"id":"117c4caf-a99e-4bdb-8466-6c0f4bbd7947","name":"Set Error Message"},{"parameters":{"url":"https://www.googleapis.com/calendar/v3/calendars/primary/events","sendQuery":true,"queryParameters":{"parameters":[{"name":"q","value":"={{ $('When Executed by Another Workflow').first().json.query }}"},{"name":"timeMin","value":"={{ $('When Executed by Another Workflow').item.json.from }}"},{"name":"timeMax","value":"={{ $('When Executed by Another Workflow').item.json.to }}"},{"name":"timeZone","value":"={{ $('When Executed by Another Workflow').first().json.timeZone }}"},{"name":"singleEvents","value":"true"},{"name":"orderBy","value":"startTime"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('Get Token').first().json.accessToken }}"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-720,80],"id":"0e1c514b-d477-48c8-8448-b8066c283e14","name":"List Events","retryOnFail":true,"alwaysOutputData":false,"onError":"continueErrorOutput"},{"parameters":{"fieldToSplitOut":"items","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-496,-16],"id":"3123c7a3-b300-44d7-ad65-40f493589dc4","name":"Split Out","alwaysOutputData":true},{"parameters":{"assignments":{"assignments":[{"id":"9ef9218c-e8ae-453d-b020-762e44794aa9","name":"status","value":"={{ $json.status }}","type":"string"},{"id":"9f5f69b2-0a57-4592-8731-02a08e6b0189","name":"creator","value":"={{ $json.creator }}","type":"object"},{"id":"bb6e0edb-1191-460a-b053-e827e6ad6792","name":"start","value":"={{ $json.start }}","type":"object"},{"id":"9bc6be0d-682b-426e-9868-be99e189bed0","name":"end","value":"={{ $json.end }}","type":"object"},{"id":"5bac55ef-1377-492d-871a-304f84b4157d","name":"summary","value":"={{ $json.summary }}","type":"string"},{"id":"82976509-447e-4062-bd9d-d1377a1ef793","name":"attendees","value":"={{ $json.attendees.filter(a => a.email !== $('Get Token').item.json.user.email) }}","type":"array"},{"id":"fb9498ec-e991-4050-9fdc-e0a88cd4276d","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"a39250b4-5346-429e-b658-a53a53412d6b","name":"location","value":"={{ $json.location }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-48,80],"id":"a12f89ec-37b6-4b67-aff3-1596262918a2","name":"Simplify Event"},{"parameters":{"aggregate":"aggregateAllItemData","destinationFieldName":"events","options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[176,80],"id":"9f3f9c25-1ddb-4303-abd4-96791bdb6def","name":"Consolidate Events"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"8e6a0513-16b2-4eca-9e5b-5c586b1a4b1e","leftValue":"={{ $json }}","rightValue":"","operator":{"type":"object","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-272,-16],"id":"abb1b81f-bef2-43cd-8634-2ee9c4267ec0","name":"Empty?"},{"parameters":{"assignments":{"assignments":[{"id":"4fac521a-301f-4c62-a3fb-11df925dffae","name":"events","value":"={{ [] }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-48,-112],"id":"8bf3e99f-9e63-420d-af94-bc7cc1d709bc","name":"Empty Events"},{"parameters":{"workflowId":{"__rl":true,"value":"t-u8ZwcwhVML6GdeISc_t","mode":"list","cachedResultUrl":"/workflow/t-u8ZwcwhVML6GdeISc_t","cachedResultName":"Edit Service Message"},"workflowInputs":{"mappingMode":"defineBelow","value":{"extra_params":"={{ $json.extra_params }}","message":"={{ $json.extra_params.params === \"slack\" ? \"_Listing events... :calendar: :clipboard:_\" : \"<i>Listing events... üóìÔ∏èüìã</i>\" }}"},"matchingColumns":[],"schema":[{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"extra_params","displayName":"extra_params","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[-1168,80],"id":"771815af-5ab4-4ef2-9a01-06a19b07e2ce","name":"Call 'Edit Service Message'","onError":"continueRegularOutput"}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"Call 'Edit Service Message'","type":"main","index":0}]]},"Get Token":{"main":[[{"node":"List Events","type":"main","index":0}]]},"List Events":{"main":[[{"node":"Split Out","type":"main","index":0}],[{"node":"Set Error Message","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"Empty?","type":"main","index":0}]]},"Simplify Event":{"main":[[{"node":"Consolidate Events","type":"main","index":0}]]},"Empty?":{"main":[[{"node":"Empty Events","type":"main","index":0}],[{"node":"Simplify Event","type":"main","index":0}]]},"Call 'Edit Service Message'":{"main":[[{"node":"Get Token","type":"main","index":0}]]}},"authors":"Dev JIA","name":"Version f49cd088","description":"","autosaved":false},"tags":[]}