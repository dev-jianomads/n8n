{"updatedAt":"2025-11-22T21:43:38.996Z","createdAt":"2025-11-22T21:39:55.098Z","id":"p5XnT4dNLsVCSXNl","name":"[Slack] Get Cached User by Slack ID","active":false,"isArchived":false,"nodes":[{"parameters":{"workflowInputs":{"values":[{"name":"slack_user_id"}]}},"id":"a8386b00-87c1-4fbd-b881-78800d3c2a2d","typeVersion":1.1,"name":"Start","type":"n8n-nodes-base.executeWorkflowTrigger","position":[-272,-64]},{"parameters":{"operation":"get","propertyName":"user","key":"={{ $json.slack_user_id }}_USER_SLACK","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-48,-64],"id":"2d473608-d92d-4071-925a-ffb7b1397d48","name":"Get Cached User","credentials":{"redis":{"id":"UKWNNzdg9opjGBYW","name":"Redis Cache"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f07b4a16-6b8e-4726-a150-11e59297c0b4","leftValue":"={{ $json.user }}","rightValue":"","operator":{"type":"string","operation":"exists","singleValue":true}},{"id":"7d37698f-df1f-4ba9-ab0d-57fd172a7f22","leftValue":"={{ $json.user }}","rightValue":"","operator":{"type":"string","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[176,-64],"id":"0b4ce16d-5b31-4659-b2bc-efb46b67c528","name":"Exists?"},{"parameters":{"operation":"set","key":"={{ $('Start').item.json.slack_user_id }}_USER_SLACK","value":"={{ JSON.stringify($json.user) }}","expire":true,"ttl":"={{ 1 * 24 * 60 * 60 }}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[848,-32],"id":"990bf60e-fc0f-40a2-b715-f9fa8423e797","name":"Cache User","credentials":{"redis":{"id":"UKWNNzdg9opjGBYW","name":"Redis Cache"}}},{"parameters":{"mode":"chooseBranch","useDataOfInput":2},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1072,32],"id":"b1aa9900-0c86-450d-b105-dd987cc1d821","name":"Merge"},{"parameters":{"mode":"raw","jsonOutput":"={{ JSON.parse($json.user) }}","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[400,-176],"id":"f1e33d4b-6e17-4c5a-9d19-1bb76e8881f4","name":"Set User"},{"parameters":{"operation":"executeQuery","query":"SELECT public.get_user_with_integrations('{{ $json.get_slack_user.user_id }}') as user;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[624,32],"id":"7455f19d-8821-467b-8197-3392b6707277","name":"Get User with Integrations","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}},{"parameters":{"mode":"raw","jsonOutput":"={{ $json.user }}","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1296,32],"id":"142fa50e-e78e-457a-a275-bc3877f66756","name":"Return User"},{"parameters":{"operation":"executeQuery","query":"SELECT public.get_slack_user('{{$('Start').item.json.slack_user_id }}');","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[400,32],"id":"e8ef9c65-23e7-4dd4-86a4-01c507a32bc7","name":"Get User by Slack ID","credentials":{"postgres":{"id":"hcrXy03eb7cfXzVe","name":"Supabase TX Pooler"}}}],"connections":{"Start":{"main":[[{"node":"Get Cached User","type":"main","index":0}]]},"Get Cached User":{"main":[[{"node":"Exists?","type":"main","index":0}]]},"Exists?":{"main":[[{"node":"Set User","type":"main","index":0}],[{"node":"Get User by Slack ID","type":"main","index":0}]]},"Cache User":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Return User","type":"main","index":0}]]},"Get User with Integrations":{"main":[[{"node":"Merge","type":"main","index":1},{"node":"Cache User","type":"main","index":0}]]},"Get User by Slack ID":{"main":[[{"node":"Get User with Integrations","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"Start":[{"json":{"slack_user_id":"U07U3MJ9SQY"}}],"Get User by Slack ID":[{"json":{"get_slack_user":{"user_id":"t07ZDdtiVLduDE3RuRHGKowoSd0f","is_active":true,"created_at":"2025-11-20T22:17:40.864115+00:00","service_id":"slack","updated_at":"2025-11-20T22:17:40.864115+00:00","display_label":"JIA Nomads","slack_user_id":"U07U3MJ9SQY","integration_id":"b5be9b5e-fb73-4690-8256-da94d37c378c","external_user_id":"T02Q7P07G91","external_username":"JIA Nomads","workspace_team_id":"T02Q7P07G91"}}}]},"versionId":"97a1a2af-838e-4f1b-9df8-d4dc11db3d4e","triggerCount":0,"shared":[{"updatedAt":"2025-11-22T21:39:55.098Z","createdAt":"2025-11-22T21:39:55.098Z","role":"workflow:owner","workflowId":"p5XnT4dNLsVCSXNl","projectId":"8nyfoRCh3nEYWaKJ"}],"tags":[]}